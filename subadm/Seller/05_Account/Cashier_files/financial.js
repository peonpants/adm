var TeG=TeG||{},tegFinancial;TeG.Financial=TeG.Financial||{};TeG.Financial=function(){function n(){return TeG.Financial.Rate==null&&$.ajax({type:"POST",url:tegUrlHelper.convertRate,contentType:"application/json; charset=utf-8",dataType:"json",async:!1}).done(function(n){TeG.Financial.Rate=Number(n[0].CreditRate.replace(/\s|\,/g,""))}),TeG.Financial.Rate}function t(n){return n>0?(n=n+1e-7,n=n.toString(),n.replace(/^(\d+\.\d{2})(\d*)$/,"$1 ")):""}function i(n,t){return n>0?(n=n.toString(),n=/\.|\,/.test(n)?n+"00":n+".00",n.replace(/^(\d*?)(\.|\,)(\d{2})\d*/,"$1$2$3")):t?"0.00":""}function r(n){return n>0?(n=n+1e-7,n=format("#,##0.00000000",n),n.replace(/^(\d+\.\d{2})(\d*)$/,"$1 ")):"0.00"}function u(n){return n=n.toString(),n=n.replace(/,/g,""),n=parseFloat(n),kendo.toString(n,"n2")}function f(n,t,i){for(var u=getConvertRates(),r=0;r<u.length;r++)if(u[r][0].CurrencyId==n&&u[r][0].ToCurrencyId==t)return u[r][0].CreditRate*i+1e-8;return console.log("Needed currency rate is apsent"),1e6*i}function e(n,t){if(n==t)return 1;return TeG.Cache.get("currency_rate_from_"+n+"_to_"+t)?TeG.Cache.get("currency_rate_from_"+n+"_to_"+t):($.ajax({type:"POST",url:tegUrlHelper.currencyRate,contentType:"application/json; charset=utf-8",data:JSON.stringify({fromCurrencyId:t,toCurrencyId:n}),params:{from:n,to:t},dataType:"json",async:!1}).done(function(i){TeG.Cache.set("currency_rate_from_"+n+"_to_"+t,i[0].Rate,864e5)}),TeG.Cache.get("currency_rate_from_"+n+"_to_"+t)?TeG.Cache.get("currency_rate_from_"+n+"_to_"+t):0)}function o(n){var i=null,t="get_login_groups",r=null,u=null;n=$.extend({},n);for(prop in n)t+="_"+n[prop];return TeG.Cache.get(t)?TeG.Cache.get(t):(typeof n.currency!="undefined"&&typeof n.groupName!="undefined"?(i=tegUrlHelper.GetLoginGroupsByCurrencyAndCategoryName,r={Currency:n.currency,GroupName:n.groupName},u={Currency:n.currency,GroupName:n.groupName}):i=tegUrlHelper.GetLoginGroups,$.ajax({type:"POST",url:i,contentType:"application/json; charset=utf-8",data:JSON.stringify(r),params:u,dataType:"json",async:!1}).done(function(n){TeG.Cache.set(t,n,864e5)}),TeG.Cache.get(t)?TeG.Cache.get(t):[])}return{ConvertToCredits:function(i){return t(i/n())},ConvertToCurrency:function(i){return t(i*n())},ConvertToCreditsWithDelimiter:function(t,r){return i(t/n(),r)},FormatBalanceWithDelimiter:function(n){return r(n)},CurrencyFormat:function(n){return u(n)},ConvertFromToCurrency:function(n,t,i){return f(n,t,i)},GetCurrencyRate:function(n,t){return e(n,t)},getLoginGroups:function(n){return o(n)}}};TeG.Financial.Rate=null;tegFinancial=new TeG.Financial
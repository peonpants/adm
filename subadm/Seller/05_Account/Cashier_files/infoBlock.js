var TeG=TeG||{};TeG.InfoBlock=function(){function u(){infoBlockData.currentDate=l(infoBlockData.timeDiff);infoBlockData.currentTime=a(infoBlockData.timeDiff);ko.mapping.fromJS(infoBlockData,i);setTimeout(u,1e3)}function c(){$.ajax({type:"POST",url:h,success:function(i,r,f){(TeG=TeG||{},TeG.GlobalVariables=TeG.GlobalVariables||{},TeG.GlobalVariables.timeDiff=i.timeDiff,TeG.GlobalVariables.memberInfo=i,$(document).trigger("GlobalVariablesTimeDiffReady"),$(document).trigger("GlobalVariablesMemberInfoReady"),tegErrorHandler.checkAjaxResponse(f))&&(n=!0,s(n,t),i.isSuspended&&$("#balanceData").removeClass("red").addClass("gray"),i.memberType.indexOf("Hidden")!=-1&&(document.title=i.memberType+" "+i.firstName+" "+i.lastName),window.infoBlockData=i,u())}})}function o(){$.ajax({type:"POST",url:e,success:function(i,r,u){tegErrorHandler.checkAjaxResponse(u)&&(t=!0,s(n,t),ko.mapping.fromJS(i,balanceModel))},error:function(n){tegErrorHandler.processError(n)}})}function s(n,t){n&&t&&$("#headerInfoBlock").removeClass("loading")}function l(n){return r(n).toLocaleDateString()}function a(n){var t=r(n),i=t.getHours()<10?"0":"",u=t.getMinutes()<10?"0":"";return i+t.getHours()+":"+u+t.getMinutes()}function r(n){var i=v(n),t=new Date;return t.setHours(t.getHours()+i.sign*i.hour),t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t.setMinutes(t.getMinutes()+i.sign*i.minute),t}function v(n){n=String(n).split(".");n[0]=n[0]?n[0]:"0";n[1]=n[1]?"0."+n[1]:"0";var t=n[0]>0?1:-1,i=Math.abs(n[0]),r=Math.abs(n[1])*60;return{sign:t,hour:i,minute:r}}var n=!1,t=!1,i=ko.mapping.fromJS({timeZone:"",firstName:"",lastName:"",memberType:"",currentDate:"",currentTime:""}),h=tegUrlHelper.InfoBlockData,f,e;return $(document).ready(function(){ko.cleanNode($("#infoBlock").get(0));ko.applyBindings(i,$("#infoBlock").get(0));ko.cleanNode($("#timeInfo").get(0));ko.applyBindings(i,$("#timeInfo").get(0));c()}),f={balance:"",currency:"",id:"",isoName:"",balanceProgressive:"",currencyProgressive:"",idProgressive:"",isoNameProgressive:""},balanceModel=ko.mapping.fromJS(f),e=tegUrlHelper.InfoBlockBalance,$(document).ready(function(){ko.cleanNode($("#balanceData").get(0));ko.applyBindings(balanceModel,$("#balanceData").get(0));o()}),window.getUserDateTime=r,{clockUpdate:function(n){n.hasClass("active")?($("#detailed_time").hide(),$("#detailed_time").animate({width:"0px",height:"0px"},500),n.removeClass("active")):($("#detailed_time").animate({width:"210px",height:"45px"},500,function(){$("#detailed_time").show()}),n.addClass("active"))},updateBalance:function(){o()}}};setInterval(TeG.InfoBlock().updateBalance,6e4)
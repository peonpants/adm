var TeG=TeG||{},tegPopups;TeG.Popups=function(n){function r(t,i){var f="#popupConfirmation",e="#popupConfirmationHeader",o="#popupConfirmationMessage",r="#cofirmationOk",u="#confirmationCancel";return $(r).addClass("tab-first"),$(u).addClass("tab-last"),this.OKButton=r,{show:function(s,h){function c(n){$(u).hide();$(r).addClass("loading");typeof t=="function"&&t();typeof n.data.that.OkButtonHandler=="function"&&n.data.that.OkButtonHandler(n)}function l(n){typeof i=="function"&&i();typeof n.data.that.CancelButtonHandler=="function"&&n.data.that.CancelButtonHandler(n)}n&&TeG.Popups().showTotalHover();$(e).html(s);$(o).html(h);$(r).hasClass("loading")&&$(r).removeClass("loading");$(u).show();$(r).off();$(r).on("click",{that:this},c);$(u).off();$(u).on("click",{that:this},l);$(f).show();$(r).focus();$(r).bind("keydown",function(n){n.which==kendo.keys.TAB&&(n.preventDefault(),$(f).find(confirmationCancel).focus())});$(u).bind("keydown",function(){event.which==kendo.keys.TAB&&(event.preventDefault(),$(f).find(cofirmationOk).focus())})},hide:function(){$(r).unbind("keydown");$(u).unbind("keydown");n&&TeG.Popups().closeTotalHover();$(f).hide()},setOKButtonTitle:function(n){$(r).html(n)},getOKButtonTitle:function(){return $(r).html()},setCancelButtonTitle:function(n){$(u).html(n)},getCancelButtonTitle:function(){return $(u).html()},OKButton:r}}function t(){this.show=function(n,t){this.constructor.prototype.CancelButtonHandler=this.CancelButtonHandler?this.CancelButtonHandler:null;this.constructor.prototype.OkButtonHandler=this.OkButtonHandler?this.OkButtonHandler:null;$("#popupConfirmation").addClass("no-icon");this.constructor.prototype.show&&this.constructor.prototype.show(n,t)};this.hide=function(){$("#popupConfirmation").removeClass("no-icon");this.constructor.prototype.hide&&this.constructor.prototype.hide()}}function i(){this.show=function(n,t){this.constructor.prototype.CancelButtonHandler=this.CancelButtonHandler?this.CancelButtonHandler:null;this.constructor.prototype.OkButtonHandler=this.OkButtonHandler?this.OkButtonHandler:null;$("#popupConfirmation").find(".confirmation").removeClass("confirmation").addClass("exclamation-padding");$("#popupConfirmation").removeClass("exclamation");this.constructor.prototype.show&&this.constructor.prototype.show(n,t)};this.hide=function(){$("#popupConfirmation").find(".exclamation-padding").removeClass("exclamation-padding").addClass("confirmation");$("#popupConfirmation").addClass("exclamation");this.constructor.prototype.hide&&this.constructor.prototype.hide()}}function h(){$("#popupChangePasswordEmailCheck").off();$("#popupChangePasswordEmailCheck").on("change",{that:this},function(n){if($("#popupChangePasswordEmailCheck").is(":checked")){$("#popupChangePasswordEmail").removeAttr("disabled");$("#popupChangePasswordEmail").off();$("#popupChangePasswordEmail").on("blur",{that:n.data.that},function(n){n.data.that.validateEmail()});$("#popupChangePasswordEmail").focus()}else $("#popupChangePasswordEmail").off(),$("#popupChangePasswordEmail").attr("disabled","disabled"),(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordEmail"))});$("#popupChangePasswordSMSCheck").off();$("#popupChangePasswordSMSCheck").on("change",{that:this},function(n){if($("#popupChangePasswordSMS").is(":disabled")){$("#popupChangePasswordSMS").removeAttr("disabled");$("#popupChangePasswordSMS").off();$("#popupChangePasswordSMS").on("blur",{that:n.data.that},function(n){n.data.that.validateSMS()});$("#popupChangePasswordSMS").focus()}else $("#popupChangePasswordSMS").off(),$("#popupChangePasswordSMS").attr("disabled","disabled"),(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordSMS"))});$("#popupChangePasswordAutoGeneratePassword").off();$("#popupChangePasswordAutoGeneratePassword").on("click",{that:this},function(n){if($("#popupChangePasswordHandleGenerate").is(":visible"))$("#popupChangePasswordHandleGenerate").slideUp(),$("#popupChangePasswordEnterPassword").off().val(""),$("#popupChangePasswordConfirmPassword").off().val(""),(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordEnterPassword")),(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordConfirmPassword"));else{$("#popupChangePasswordHandleGenerate").slideDown();$("#popupChangePasswordEnterPassword").off();$("#popupChangePasswordConfirmPassword").off();$("#popupChangePasswordEnterPassword").on("blur",{that:n.data.that},function(n){n.data.that.validateEnterPassword()});$("#popupChangePasswordConfirmPassword").on("blur",{that:n.data.that},function(n){n.data.that.validateConfirmPassword()})}});this.setEmail=function(n){$("#popupChangePasswordEmail").val(n);$("#popupChangePasswordEmailCheck").click()};this.setSms=function(n){$("#popupChangePasswordSMS").val($.trim(n));$.trim($("#popupChangePasswordEmail").val())==""&&$.trim(n)!=""&&($("#popupChangePasswordSMSCheck").click(),$("#popupChangePasswordEmailCheck").click())};this.validateEmail=function(){new TeG.Validator($("#popupChangePasswordEmail")).EmailIncorrectListener(TeG.Translations.ValidateInvalidFieldCheckAndTryAgain.replace(/%%field_label%%/,$('label[for="popupChangePasswordEmail"]').html().replace(/^s*|\*|\:|\s*$/g,""))).EmailUnsupportedCharsListener(TeG.Translations.ValidateInvalidFieldCheckAndTryAgain.replace(/%%field_label%%/,$('label[for="popupChangePasswordEmail"]').html().replace(/^s*|\*|\:|\s*$/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$('label[for="popupChangePasswordEmail"]').html().replace(/^s*|\*|\:|\s*$/g,""))).ErrorRenderInHtml2()};this.validateSMS=function(){new TeG.Validator($("#popupChangePasswordSMS")).MobileNumberIncorrectListener(TeG.Translations.ValidateInvalidMobileNumber).MobileNumberUnsupportedCharsListener(TeG.Translations.ValidateInvalidMobileNumber).RequiredListener(TeG.Translations.ValidateInsertMobileNumber).ErrorRenderInHtml2()};this.validateEnterPassword=function(){new TeG.Validator($("#popupChangePasswordEnterPassword")).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('label[for="popupChangePasswordEnterPassword"]').html().replace(/\*|\:/g,""))).PasswordIncorrectListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('label[for="popupChangePasswordEnterPassword"]').html().replace(/\*|\:/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$('label[for="popupChangePasswordEnterPassword"]').html().replace(/\*|\:/g,""))).ErrorRenderInHtml2()};this.validateConfirmPassword=function(){new TeG.Validator($("#popupChangePasswordConfirmPassword")).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('label[for="popupChangePasswordConfirmPassword"]').html().replace(/\*|\:/g,""))).RepeatPasswordListener(TeG.Translations.ValidatePasswordNotMatch,$("#popupChangePasswordEnterPassword").val()).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$('label[for="popupChangePasswordConfirmPassword"]').html().replace(/\*|\:/g,""))).ErrorRenderInHtml2()};this.getData=function(){var n={};return $("#popupChangePasswordEmailCheck").is(":checked")&&(n.email=$("#popupChangePasswordEmail").val()),$("#popupChangePasswordSMSCheck").is(":checked")&&(n.sms=$("#popupChangePasswordSMS").val()),$("#popupChangePasswordAutoGeneratePassword").is(":checked")||(n.password=$("#popupChangePasswordEnterPassword").val()),n};this.actionOkButton=function(n){(new TeG.ValidateElement.passwordPairOnSubmit({jPass:$("#popupChangePasswordEnterPassword"),jConf:$("#popupChangePasswordConfirmPassword"),renderType:TeG.ValidateElement.RENDER_IN_HTML2}),$("#popupChangePasswordEmailCheck").is(":checked")&&$("#popupChangePasswordEmail").blur(),$("#popupChangePasswordSMSCheck").is(":checked")&&$("#popupChangePasswordSMS").blur(),$("#popupChangePasswordAutoGeneratePassword").is(":checked")||($("#popupChangePasswordEnterPassword").blur(),$("#popupChangePasswordConfirmPassword").blur()),(new TeG.Validator).IsContainerHasDisplayedErrorMessage($("#popupChangePasswordConfirmation")))||($("#popupChangePasswordCofirmationOk").css("margin-right","112px"),$("#popupChangePasswordConfirmationCancel").hide(),$("#popupChangePasswordCofirmationOk").addClass("loading"),typeof n.data.that.OkButtonHandler=="function"&&n.data.that.OkButtonHandler(n))};this.actionCancelButton=function(n){n.data.that.hide();typeof n.data.that.CancelButtonHandler=="function"&&n.data.that.CancelButtonHandler(n)};this.show=function(){$("#popupChangePasswordCofirmationOk").off();$("#popupChangePasswordCofirmationOk").on("click",{that:this},function(n){n.data.that.actionOkButton(n)});$("#popupChangePasswordConfirmationCancel").off();$("#popupChangePasswordConfirmationCancel").on("click",{that:this},function(n){n.data.that.actionCancelButton(n)});$("#popupChangePasswordConfirmation").show();$("#popupChangePasswordCofirmationOk").focus()};this.hide=function(){$("#popupChangePasswordAutoGeneratePassword").is(":checked")||$("#popupChangePasswordAutoGeneratePassword").click();(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordEmail"));(new TeG.Validator).SetRenderErrorType("inHtml2").CleanError($("#popupChangePasswordSMS"));$("#popupChangePasswordEmail").val("");$("#popupChangePasswordSMS").val("");$("#popupChangePasswordCofirmationOk").removeClass("loading");$("#popupChangePasswordConfirmationCancel").show();$("#popupChangePasswordEmailCheck").removeAttr("checked");$("#popupChangePasswordEmail").removeAttr("disabled");$("#popupChangePasswordSMSCheck").removeAttr("checked");$("#popupChangePasswordSMS").attr("disabled","disabled");$("#popupChangePasswordCofirmationOk").css("margin-right","0");$("#popupChangePasswordConfirmation").hide()}}function c(t){var r="#popupSuccessful",u="#popupSuccessHeader",f="#popupSuccessMessage",i="#successOk";return{show:function(e,o){function s(n){typeof t=="function"&&t();typeof n.data.that.OkButtonHandler=="function"&&n.data.that.OkButtonHandler(n)}n&&TeG.Popups().showTotalHover();$(u).html(e);$(f).html(o);$(i).off();$(i).on("click",{that:this},s);$(r).show();$(i).focus()},hide:function(){n&&TeG.Popups().closeTotalHover();$(r).hide()}}}function l(t){var r="#popupError",u="#popupErrorHeader",f="#popupErrorMessage",i="#errorClose";return{show:function(e,o){function s(i){typeof t=="function"&&t();typeof i.data.that.CloseButtonHandler=="function"&&i.data.that.CloseButtonHandler(i);TeG.Popups(n).error().hide()}n&&TeG.Popups().showTotalHover();$(u).html(e);$(f).html(o);$(i).off();$(i).on("click",{that:this},s);$(r).show();$(i).focus()},hide:function(){n&&TeG.Popups().closeTotalHover();$(r).hide()}}}function u(){var f="#poupAddPlayerLoginId",e="#poupAddPlayerPassId",o="#popupAddPlayerBalanceId",s="#popupAddPlayerConfirmationNumberId",i="#poupAddPlayerMailId",r="#poupAddPlayerMobId",h="#popupAddPlayerMobileGameSendEmailOrSms",t="#popupAddPlayerMobileGameSendEmailAndSms",u="#poupAddPlayerOkButton";return{show:function(){if(this.balance&&(this.balance=TeG.Financial().CurrencyFormat(this.balance)),this.emailAndSmsMessage||$(t+this.type).length>0&&(this.emailAndSmsMessage=$(t+this.type).html()),$(".game-sent").css("display","block"),$(f+this.type).length>0&&$(f+this.type).html(this.login?this.login:"&nbsp"),$(e+this.type).length>0&&$(e+this.type).html(this.password?this.password:"&nbsp"),this.type=="e"&&(this.balance="0"),$(o+this.type).length>0&&$(o+this.type).html(this.balance||this.balance=="0"?this.balance+(this.isoCode?" "+this.isoCode:""):"0"+(this.isoCode?" "+this.isoCode:"")),$(s+this.type).length>0&&$(s+this.type).html(this.confirmationNumber?this.confirmationNumber:"&nbsp"),$(i+this.type).length>0&&$(i+this.type).html(this.mobileNumber?this.mobileNumber:"&nbsp"),$(i+this.type).length>0&&this.email&&$(i+this.type).html(this.email),this.mobGamesMobileNumber&&this.mobGamesEmail?($(h+this.type).hide(),$(t+this.type).length>0&&$(t+this.type).html(this.emailAndSmsMessage.replace(/%%MSISDN%%/,this.mobGamesMobileNumber).replace(/%%email%%/,this.mobGamesEmail))):this.mobGamesMobileNumber||this.mobGamesEmail?($(t+this.type).hide(),this.mobGamesMobileNumber?$(r+this.type).length>0&&$(r+this.type).html(this.mobGamesMobileNumber):this.mobGamesEmail&&$(r+this.type).length>0&&$(r+this.type).html(this.mobGamesEmail)):$(".game-sent").css("display","none"),typeof this.okHandler=="function"){$(u+this.type).off();$(u+this.type).on("click",{that:this},this.okHandler)}$(this.popupId).show();$(u+this.type).focus()},hide:function(){n&&TeG.Popups().closeTotalHover();$(this.popupId).hide();$(t+this.type).length>0&&$(t+this.type).html(this.emailAndSmsMessage)},emailAndSmsMessage:null}}function e(){this.popupId="#poupAddPlayerSuccessfully";this.type="s"}function o(){this.popupId="#addPlayerSuccessfulyWithConfNumber";this.type="c"}function s(){this.popupId="#addPlayerError";this.type="e"}function a(){this.popupId="#popupReceipt";this.headerId="#receiptHeading";this.numberId="#receiptNumber";this.dateId="#receiptDate";this.amountId="#receiptAmount";this.paymentMethod="#receiptPopupPaymentMethod";this.notesAreaId="#receiptNotesArea";this.customerNameInputId="#receiptCustomerNameInput";this.amountLabelId="#receiptAmountLbl";this.cancelButtonId="#poupReceiptCancelButton";this.printButtonId="#poupReceiptPrintButton";this.saveButtonId="#poupReceiptSaveButton";this.getInProgress=!1;this.customerNameDbValue="";this.noteDbValue="";this.hovered=!1;this.get=function(n){return this.getInProgress=!0,$.ajax({url:tegUrlHelper.getTransactionReceipt,type:"POST",that:this,data:JSON.stringify({transactionId:n}),contentType:"application/json; charset=utf-8",error:function(n){tegPopups.closeTotalHover();tegErrorHandler.processError(n);this.that.getInProgress=!1}}).done(function(n){$(this.that.numberId).html(n.TransactionId?n.TransactionId:"&nbsp;");n.CreatedDate?$(this.that.dateId).html(n.CreatedDate.replace(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).*/,"$3-$2-$1 $4:$5:$6")):$(this.that.dateId).html("&nbsp");$(this.that.customerNameInputId).val(n.CustomerName?n.CustomerName:"");$(this.that.amountId).html((n.Amount?TeG.Financial().CurrencyFormat(n.Amount):"&nbsp;")+" "+(n.Currency?n.Currency:"&nbsp;"));$(this.that.notesAreaId).val(n.Notes?n.Notes:"");var t="";n.TransactionType.toLowerCase()=="deposit"?t=TeG.Translations.ReceiptPopupDepositAmount:n.TransactionType.toLowerCase()=="withdrawal"&&(t=TeG.Translations.ReceiptPopupWithdrawalAmount);$(this.that.amountLabelId).html(t);this.that.customerNameDbValue=n.CustomerName?n.CustomerName:"";this.that.noteDbValue=n.Notes?n.Notes:"";this.that.getInProgress=!1}),this};this.show=function(n){var n=n||this;if(n.hovered||(TeG.Popups().showTotalHover(),n.hovered=!0),n.getInProgress){setTimeout(function(){n.show(n)},250);return}$(n.popupId).show();$(n.customerNameInputId).off();$(n.customerNameInputId).on("focus click",{that:n},function(n){$(n.data.that.saveButtonId).addClass("save-focused");$(n.data.that.saveButtonId).show()});$(n.notesAreaId).off();$(n.notesAreaId).on("focus click",{that:n},function(n){$(n.data.that.saveButtonId).addClass("save-focused");$(n.data.that.saveButtonId).show()});$(n.saveButtonId).off();$(n.saveButtonId).on("click",{that:n},function(t){n=t.data.that;$(n.saveButtonId).addClass("loading");$(n.printButtonId).attr("disabled","disabled");$(n.cancelButtonId).attr("disabled","disabled");_saveReceipt.call(n,function(){n=this;n.hide();$(n.saveButtonId).removeClass("loading");$(n.printButtonId).removeAttr("disabled","disabled");$(n.cancelButtonId).removeAttr("disabled","disabled")})});$(n.saveButtonId).on("focus",{that:n},function(t){n=t.data.that;$(n.saveButtonId).removeClass("save-focused")});$(n.printButtonId).off();$(n.printButtonId).on("click",{that:this},function(t){data_print={number:$(n.numberId).html(),date:$(n.dateId).html(),name:$(n.customerNameInputId).val(),amount:$(n.amountId).html(),method:$(n.paymentMethod).html(),notes:$(n.notesAreaId).val(),amountLabel:$(n.amountLabelId).html(),showName:$(n.customerNameInputId).val()};localStorage.setItem("printReceiptData",JSON.stringify(data_print));t.data.that.PrintHandler&&typeof t.data.that.PrintHandler=="function"&&t.data.that.PrintHandler();setTimeout(function(){printWindow=window.open(tegUrlHelper.PrintReceipt,"_blank");printWindow.focus()});$(n.saveButtonId).click()});$(n.printButtonId).on("focus",{that:n},function(t){n=t.data.that;$(n.saveButtonId).removeClass("save-focused")});$(n.cancelButtonId).off();$(n.cancelButtonId).on("click",{that:n},function(n){n.data.that.hide();n.data.that.CancelHandler&&typeof n.data.that.CancelHandler=="function"&&n.data.that.CancelHandler.call(n.data.that)});$(n.cancelButtonId).on("focus",{that:n},function(t){n=t.data.that;$(n.saveButtonId).removeClass("save-focused")})};this.hide=function(){TeG.Popups().closeTotalHover();$(this.numberId).html("");$(this.dateId).html("");$(this.customerNameInputId).val("");$(this.depositAmountId).html("");$(this.notesAreaId).val("");$(this.saveButtonId).hide();$(this.popupId).hide()};_saveReceipt=function(n){if(that=this,$(this.customerNameInputId).val()==this.customerNameDbValue&&$(this.notesAreaId).val()==this.noteDbValue){n&&typeof n=="function"&&n.call(that);return}data_save={transactionId:Number($(this.numberId).html()),customerName:$(this.customerNameInputId).val(),notes:$(this.notesAreaId).val()};$.ajax({type:"POST",url:tegUrlHelper.UpdateTransactionReceipt,contentType:"application/json; charset=utf-8",dataType:"json",that:this,saveHandler:n,data:JSON.stringify(data_save),error:function(n){that=this.that;that.hide();tegErrorHandler.processError(n,TeG.Translations.NestedBlockErrorLockUnlockMessage)}}).done(function(){that=this.that;n&&typeof n=="function"&&n.call(that)})}}function v(t){var f="#popupAddCashierSuccessfully",s="#PopupAddAccountTitleHeader",e="#popupAddCashierMailAndPhoneSent",i="#popupAddCashierMailAndPhoneMessage",o="#popupAddCashierMailOrPhoneSent",r="#popupAddCashierMailOrPhoneMessage",h="#popupAddCashierLoginId",c="#popupAddCashierPassId",u="#popupAddCashierOkButtons";return{show:function(){function a(n){typeof t=="function"&&t();typeof n.data.that.OkButtonHandler=="function"&&n.data.that.OkButtonHandler(n)}if(n&&TeG.Popups().showTotalHover(),this.mailAndPhoneMessage=$(i).html(),this.mailOrPhoneMessage=$(r).html(),$(h).html(this.login?this.login:""),$(c).html(this.password?this.password:""),this.title&&$(s).html(this.title),this.phone&&(this.phone=-1==this.phone.indexOf("+")?"+"+this.phone:this.phone),this.mail&&this.phone)$(i).html(this.mailAndPhoneMessage.replace(/%%mail%%/,this.mail).replace(/%%phone%%/,this.phone)),$(e).show();else if(this.mail||this.phone){var l=this.mail?this.mail:this.phone;$(r).html(this.mailOrPhoneMessage.replace(/%%receiver%%/,l));$(o).show()}$(u).off();$(u).on("click",{that:this},a);$(f).show();$(u).focus()},hide:function(){n&&TeG.Popups().closeTotalHover();$(e).hide();$(o).hide();$(i).html(this.mailAndPhoneMessage);$(r).html(this.mailOrPhoneMessage);$(f).hide()}}}function y(){function h(){$(i).off();$(i).on("blur",function(){new TeG.Validator($(i)).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$(f).html().replace(/\*|\:/g,""))).PasswordIncorrectListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$(f).html().replace(/\*|\:/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$(f).html().replace(/\*|\:/g,""))).DisplayErrorMessageOffsetTop(2).ErrorRenderDefault()});$(t).off();$(t).on("blur",function(){new TeG.Validator($(t)).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$(e).html().replace(/\*|\:/g,""))).PasswordIncorrectListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$(e).html().replace(/\*|\:/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$(e).html().replace(/\*|\:/g,""))).DisplayErrorMessageOffsetTop(2).ErrorRenderDefault()});$(r).off();$(r).on("blur",function(){new TeG.Validator($(r)).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$(s).html().replace(/\*|\:/g,""))).RepeatPasswordListener(TeG.Translations.ValidatePasswordNotMatch,$(t).val()).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$(s).html().replace(/\*|\:/g,""))).DisplayErrorMessageOffsetTop(2).ErrorRenderDefault()})}var n="#popupChangePassword",o="#changePasswordCancel",u="#changePasswordOk",i="#changePasswordOld",t="#changePasswordNew",r="#changePasswordNewConfirm",f="#changePasswordOldLabel",e="#changePasswordNewLabel",s="#changePasswordNewConfirmLabel";return{show:function(){tegPopups.showTotalHover();$(n).show();$(u).focus();h();$("#changePasswordNew").placeholder();$(u).off();$(u).on("click",{that:this},function(u){if(new TeG.ValidateElement.passwordPairOnSubmit({jPass:$(t),jConf:$(r),renderType:TeG.ValidateElement.RENDER_DEFAULT}),$(i).blur(),$(t).blur(),$(r).blur(),!(new TeG.Validator).IsContainerHasDisplayedErrorMessage($(n))){var f={passwordCurrent:$("#changePasswordOld").val(),passwordNew:$("#changePasswordNew").val(),loginName:$.cookie("login")};$(n).hide();tegPopups.showDaisyWheelTotalHover();$.ajax({type:"POST",url:tegUrlHelper.updateCurrentLoginPassword,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f),error:function(n){tegPopups.closeTotalHover();tegErrorHandler.processError(n)}}).done(function(t){if(tegPopups.totalHoverRemoveDaisyWheel(),t.IsSucceed){var r=(new TeG.Popups).success();r.OkButtonHandler=function(n){n.data.that.hide();tegPopups.closeTotalHover()};u.data.that.hide();r.show($("#changePopupPasswordSuccessTitle").val(),$("#changePopupPasswordSuccessMessage").val())}else{$(n).show();new TeG.Validator($(i)).SetMessage(TeG.Translations.PopupsChangePasswordIsIncorrect).ErrorRenderDefault();return}})}});$(o).off();$(o).on("click",{that:this},function(n){n.data.that.hide()})},hide:function(){tegPopups.closeTotalHover();$(n).hide();$(n).find(".error").removeClass("error");$(n).find(".errorMessage").remove();$(n).find('input[type="password"]').val("")}}}var f="#popupHover";return e.prototype=u(),o.prototype=u(),s.prototype=u(),{showTotalHover:function(){$("#bodyContent").on("keydown",function(){return!1});$(f).show()},showDaisyWheelTotalHover:function(){$("#popupHover").addClass("divLoading");this.showTotalHover()},totalHoverRemoveDaisyWheel:function(){$("#popupHover").removeClass("divLoading")},closeTotalHover:function(){$("#bodyContent").off();$("#popupHover").removeClass("divLoading");$(f).hide()},confirmation:function(n,t,i){return r(n,t,i)},preConfirmation:function(n,i,u){return t.prototype=r(n,i,u),t.prototype.constructor=t,new t(n,i,u)},confirmationError:function(n,t,u){return i.prototype=r(n,t,u),i.prototype.constructor=i,new i(n,t,u)},changePasswordConfirmation:function(){return new h},success:function(n,t){return c(n,t)},error:function(n,t){return l(n,t)},getAddAccountPopup:function(n){return n.AddPlayerCasinoCreditBalance>0?n.IsDeposited?new(this.addAccountSuccessfulyWithConfNumber()):new(this.addAccountError()):new(this.addAccountSuccessfully())},addAccountSuccessfully:function(){return e},addAccountSuccessfulyWithConfNumber:function(){return o},addAccountError:function(){return s},receipt:function(){return new a},addCashier:function(){return v()},changePassword:function(){return y()},errorSucceed:function(){var n=new tegPopups.error;tegPopups.totalHoverRemoveDaisyWheel();n.CloseButtonHandler=function(){tegPopups.closeTotalHover()};n.show(TeG.Translations.PopupError,TeG.Translations.PopupError)}}};tegPopups=new TeG.Popups;TeG.PopupsParent={Confirmation:{okButtonHandler:function(){},cancelButtonHandler:function(){},outerData:{},_okButtonCaption:null,_okButtonCaptionDefault:null,_cancelButtonCaption:null,_cancelButtonCaptionDefault:null,popupId:"popupConfirmation",headerId:"popupConfirmationHeader",messageId:"popupConfirmationMessage",okButtonId:"cofirmationOk",cancelButtonId:"confirmationCancel",notShowHover:!1,_init:function(n){$("#"+this.headerId).html("");$("#"+this.messageId).html("");switch(n){case undefined:$("#"+this.popupId).addClass("no-icon");$("#popupConfirmation").find(".exclamation-padding").removeClass("exclamation-padding").addClass("confirmation");$("#popupConfirmation").addClass("exclamation");break;case"notice":$("#"+this.popupId).removeClass("no-icon");$("#popupConfirmation").find(".exclamation-padding").removeClass("exclamation-padding").addClass("confirmation");$("#popupConfirmation").addClass("exclamation");break;case"exclamation":$("#"+this.popupId).removeClass("no-icon");$("#"+this.popupId).find(".confirmation").removeClass("confirmation").addClass("exclamation-padding");$("#"+this.popupId).removeClass("exclamation");break;default:throw"TeG.Popups2.Confirmation: incorrect icon parameter";}},setOkCaption:function(n){this._okButtonCaption=n},setCancelCaption:function(n){this._cancelButtonCaption=n},_show:function(n,t){$("#"+this.headerId).html(n);$("#"+this.messageId).html(t);this._okButtonCaption&&(this._okButtonCaptionDefault=$("#"+this.okButtonId).html(),$("#"+this.okButtonId).html(this._okButtonCaption));this._cancelButtonCaption&&(this._cancelButtonCaptionDefault=$("#"+this.cancelButtonId).html(),$("#"+this.cancelButtonId).html(this._cancelButtonCaption));$("#"+this.okButtonId).off();$("#"+this.okButtonId).on("click",{that:this},function(n){n.data.that.okHandler(n)});$("#"+this.cancelButtonId).off();$("#"+this.cancelButtonId).on("click",{that:this},function(n){n.data.that.cancelHandler(n)});this.notShowHover||TeG.Popups2.showTotalHover();$("#"+this.popupId).show();$("#"+this.okButtonId).focus()},_hide:function(){this._okButtonCaptionDefault&&$("#"+this.okButtonId).html(this._okButtonCaptionDefault);this._cancelButtonCaptionDefault&&$("#"+this.cancelButtonId).html(this._cancelButtonCaptionDefault);$("#"+this.okButtonId).css("margin-right","0").removeClass("loading");$("#"+this.cancelButtonId).show();this.notShowHover||TeG.Popups2.closeTotalHover();$("#"+this.popupId).hide()},_okHandler:function(n){$("#"+this.cancelButtonId).hide();$("#"+this.okButtonId).css("margin-right","112px").addClass("loading");typeof n.data.that.okButtonHandler=="function"&&n.data.that.okButtonHandler(n)},_cancelHandler:function(n){n.data.that.hide();typeof n.data.that.cancelButtonHandler=="function"&&(n.data.that.cancelButtonHandler(n),TeG.Popups2.closeTotalHover())}},Error:{closeButtonHandler:function(){},outerData:{},popupId:"popupError",headerId:"popupErrorHeader",messageId:"popupErrorMessage",closeButtonId:"errorClose",_closeButtonCaption:null,_closeButtonCaptionDefault:null,_init:function(n){switch(n){case"exclamation":break;case"notice":$("#"+this.popupId).removeClass("no-icon");$("#"+this.popupId).find(".message_wrp").removeClass("exclamation").addClass("confirmation");$("#"+this.messageId).css("padding-left",0);$("#"+this.popupId).addClass("exclamation");break;default:throw"TeG.Popups2.Success: incorrect icon parameter";}$("#"+this.headerId).html("");$("#"+this.messageId).html("")},setCloseCaption:function(n){this._closeButtonCaption=n},_show:function(n,t){TeG.Popups2.showTotalHover();$("#"+this.headerId).html(n);$("#"+this.messageId).html(t);this._closeButtonCaption&&(this._closeButtonCaptionDefault=$("#"+this.closeButtonId).html(),$("#"+this.closeButtonId).html(this._closeButtonCaption));$("#"+this.closeButtonId).off();$("#"+this.closeButtonId).on("click",{that:this},function(n){n.data.that.closeHandler(n)});$("#"+this.popupId).show();$("#"+this.closeButtonId).focus()},_hide:function(){this._closeButtonCaptionDefault&&$("#"+this.closeButtonId).html(this._closeButtonCaptionDefault);TeG.Popups2.closeTotalHover();$("#"+this.popupId).hide()},_closeHandler:function(n){this.hide();typeof n.data.that.closeButtonHandler=="function"&&n.data.that.closeButtonHandler(n)}},Success:{okButtonHandler:function(){},outerData:{},popupId:"popupSuccessful",headerId:"popupSuccessHeader",messageId:"popupSuccessMessage",okButtonId:"successOk",_okButtonCaption:null,_okButtonCaptionDefault:null,_init:function(n){switch(n){case"green":break;default:throw"TeG.Popups2.Success: incorrect icon parameter";}$("#"+this.headerId).html("");$("#"+this.messageId).html("")},setOkCaption:function(n){this._okButtonCaption=n},_show:function(n,t){TeG.Popups2.showTotalHover();$("#"+this.headerId).html(n);$("#"+this.messageId).html(t);this._okButtonCaption&&(this._okButtonCaptionDefault=$("#"+this.okButtonId).html(),$("#"+this.okButtonId).html(this._okButtonCaption));$("#"+this.okButtonId).off();$("#"+this.okButtonId).on("click",{that:this},function(n){n.data.that.okHandler(n)});$("#"+this.popupId).show();$("#"+this.okButtonId).focus()},_hide:function(){this._okButtonCaptionDefault&&$("#"+this.okButtonId).html(this._okButtonCaptionDefault);TeG.Popups2.closeTotalHover();$("#"+this.popupId).hide()},_okHandler:function(n){this.hide();typeof n.data.that.okButtonHandler=="function"&&n.data.that.okButtonHandler(n)}}};TeG.Popups2={ICON_SUCCESS:"successs",ICON_EXCLAMATION:"exclamation",ICON_NOTICE:"notice",TYPE_AGENT:"Agent",TYPE_MASTER_AGENT:"MasterAgent",popupsHoveringId:"popupHover",bodyContent:"bodyContent",showTotalHover:function(){$("#"+TeG.Popups2.bodyContent).on("keydown",function(){return!1});$("#"+TeG.Popups2.popupsHoveringId).show()},showDaisyWheelTotalHover:function(){$("#popupHover").addClass("divLoading");this.showTotalHover()},totalHoverRemoveDaisyWheel:function(){$("#popupHover").removeClass("divLoading")},closeTotalHover:function(){$("#"+TeG.Popups2.bodyContent).off();$("#"+TeG.Popups2.popupsHoveringId).removeClass("divLoading");$("#"+TeG.Popups2.popupsHoveringId).hide()},Confirmation:function(n){this._init(n);this.show=function(n,t,i){this.notShowHover=i;this._show(n,t)};this.hide=function(){this._hide()};this.okHandler=function(n){this._okHandler(n)};this.cancelHandler=function(n){n.data.that._cancelHandler(n)}},Error:function(n){this._init(n);this.show=function(n,t){this._show(n,t)};this.hide=function(){this._hide()};this.closeHandler=function(n){this._closeHandler(n)}},Success:function(n){this._init(n);this.show=function(n,t){this._show(n,t)};this.hide=function(){this._hide()};this.okHandler=function(n){this._okHandler(n)}},CreateMember:function(n,t){if(!n||!(n==TeG.Popups2.ICON_SUCCESS||n==TeG.Popups2.ICON_EXCLAMATION))throw"icon is missed or invalid";if(!t||!(t==TeG.Popups2.TYPE_MASTER_AGENT||t==TeG.Popups2.TYPE_AGENT))throw"type is missed or invalid";this.icon=n;this.type=t;this.okButtonHandler=function(){};this.assignModel=function(n){return ko.cleanNode($("#popupAddMemberSuccessfully").get(0)),ko.applyBindings(n,$("#popupAddMemberSuccessfully").get(0)),this};this.show=function(){TeG.Popups2.showTotalHover();this.icon==TeG.Popups2.ICON_SUCCESS&&($("#popupAddMemberSuccessfully").removeClass("exclamation"),$("#popupAddMemberSuccessfully").addClass("successs"),this.type==TeG.Popups2.TYPE_MASTER_AGENT?$("#popupAddMemberSuccessfully h1").html($("#popupAddMemberSuccessfully h1").attr("data-MATitleDeposited")):$("#popupAddMemberSuccessfully h1").html($("#popupAddMemberSuccessfully h1").attr("data-ATitleDeposited")));this.icon==TeG.Popups2.ICON_EXCLAMATION&&($("#popupAddMemberSuccessfully").removeClass("successs"),$("#popupAddMemberSuccessfully").addClass("exclamation"),this.type==TeG.Popups2.TYPE_MASTER_AGENT?$("#popupAddMemberSuccessfully h1").html($("#popupAddMemberSuccessfully h1").attr("data-MATitleNotDeposited")):$("#popupAddMemberSuccessfully h1").html($("#popupAddMemberSuccessfully h1").attr("data-ATitleNotDeposited")));$("#popupAddMemberSuccessfully").show();$("#popupAddMemberOkButtons").on("click",{that:this},function(n){TeG.Popups2.closeTotalHover();n.data.that.hide();n.data.that.okButtonHandler()});$("#popupAddMemberOkButtons").focus()};this.hide=function(){$("#popupAddMemberSuccessfully").hide()}},PCA:function(){var n=this;this.closeButtonHandler=function(){};this.exportToExcellButtonHandler=function(){};this.printButtonHandler=function(){};typeof PCAViewModel=="undefined"&&(PCAViewModel={firstAndLastName:ko.observable(),datePeriod:ko.observable()});$("#popup-pca grid-pca-place").html("");this.setModel=function(n){return PCAViewModel.firstAndLastName(n.firstAndLastName),PCAViewModel.datePeriod(n.datePeriod),ko.dataFor($("#popup-pca").get(0))||ko.applyBindings(PCAViewModel,$("#popup-pca").get(0)),this};this.gridResize=function(){var n=$("#divReportProgressiveGamePlayDetailedGrid1Grid"),r=n.height(),i=n.find(".k-grid-header"),t=n.find(".k-grid-content"),u=t.find("table");t.height(r-32);u.height()<=t.height()?i.css("padding-right",0):i.css("padding-right","17px")};this.gridBehaivor=function(){$(".popup.popupDisplay.pca").css("bottom","10%");$(".gridOverridePCA").height($("#popup-pca").height()-100);$("#grid-pca-place table").css("width","100%");n.gridResize()};this.placeGrid=function(n){var t,i;return $("#grid-pca-place").html(n),t=this.gridBehaivor,$("#grid-pca-place .k-widget.k-grid").addClass("no-resize"),$("#grid-pca-place .k-grid-header").addClass("no-resize"),i=new TeG.Grid($("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid"),getReportPCAGuid()),i.addColumnOrderBehaivor(),$("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid")._events.dataBound.push(function(){$("#grid-pca-place").show();$("#popup-pca").show();$("#popup-pca-print").focus();i.onBound();t()}),$("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid")._events.columnReorder.push(function(){t()}),$("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid")._events.columnHide.push(function(){t()}),$("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid")._events.columnShow.push(function(){t()}),this};this.show=function(){TeG.Popups2.showTotalHover();var t=this.gridBehaivor;$(window).bind(kendo.support.resize,function(){t();n.gridResize();splitterResize()});$("#popup-pca-close").off();$("#popup-pca-close").on("click",{that:this},function(n){n.data.that.hide();typeof n.data.that.closeButtonHandler=="function"&&n.data.that.closeButtonHandler()});$("#popup-pca-to-excel").off();$("#popup-pca-to-excel").on("click",{that:this},function(n){exportToExcelPCA();n.data.that.hide();typeof n.data.that.exportToExcellButtonHandler=="function"&&n.data.that.exportToExcellButtonHandler()});$("#popup-pca-print").off();$("#popup-pca-print").on("click",{that:this},function(){var n=new(TeG.Print().PrintGrid);n.setGrid($("#ReportProgressiveGamePlayDetailedGrid1Grid").data("kendoGrid"));n.setTitle("PCA <p/>"+$("#popup-pca h3").html());n.store().open()})};this.hide=function(){TeG.Popups2.closeTotalHover();$("#popup-pca").hide()}}};TeG.Popups2.Confirmation.prototype=TeG.PopupsParent.Confirmation;TeG.Popups2.Confirmation.prototype.constructor=TeG.Popups2.Confirmation;TeG.Popups2.Success.prototype=TeG.PopupsParent.Success;TeG.Popups2.Success.prototype.constructor=TeG.Popups2.Success;TeG.Popups2.Error.prototype=TeG.PopupsParent.Error;TeG.Popups2.Error.prototype.constructor=TeG.Popups2.Error
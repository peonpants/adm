var TeG=TeG||{};TeG.MemberNestedBlock=function(n){return n==null&&(n="RepresentativesGrid"),{LockUnlock:function(t,i){var r=t.attr("id").substring(14),u=$(t.find("span").get(1)).hasClass("lock")?"Lock":"Open";t.addClass("loading");$.ajax({type:"POST",url:tegUrlHelper.updateMemberStatus,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({loginName:r,loginStatus:u}),error:function(n){tegErrorHandler.processError(n,TeG.Translations.NestedBlockErrorLockUnlockMessage)}}).done(function(f){var o,h,c;if(i&&(o=i(f)),t.removeClass("loading"),u=="Open")$("#status_"+r).html("<div style='text-align:center'><img alt='Open' src='/Images/statusOpen.png' /><\/div>").attr("title","");else{$("#status_"+r).html("<div style='text-align:center'><img alt='Open' src='/Images/statusLocked.png' /><\/div>");var l=infoBlockData.timeDiff?infoBlockData.timeDiff:0,s=getUserDateTime(l),e=s.getDate();e=e.length==1?"0"+e:e;h=("0"+(s.getMonth()+1)).replace(/(\d{2})$/,"$1");c=s.getFullYear();$("#status_"+r).attr("title","Lock Date: "+e+"-"+h+"-"+c+". Locked by: "+$("#firstName").html()+" "+$("#lastName").html()+"("+$("#memberType").html()+")")}TeG.MemberNestedBlock(n).NestedBlockClose();(!o||o&&o.nestedBlockOpen)&&TeG.MemberNestedBlock(n).NestedBlockOpen()})},NestedBlockClose:function(){var t=$("#"+n).data("kendoGrid"),i=t.select()[0].rowIndex,r=t.tbody.find(">tr:not(.k-grouping-row)").eq(i);t.collapseRow(r)},NestedBlockOpen:function(){var t=$("#"+n).data("kendoGrid"),i=t.select()[0].rowIndex,r=t.tbody.find(">tr:not(.k-grouping-row)").eq(i);t.select(r)},DeleteMember:function(n){function r(){$.ajax({type:"POST",url:tegUrlHelper.updateMemberStatus,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({loginName:i,loginStatus:"Removed"}),error:function(i){t.hide();n.removeClass("loading");tegErrorHandler.processError(i,TeG.Translations.NestedBlockErrorDeleteAccount)}}).done(function(){n.removeClass("loading");t.hide();tegPopups.success(f).show(TeG.Translations.PopupDeleteCashierHeader,TeG.Translations.PopupDeleteCashierSuccess)})}function u(){n.removeClass("loading");t.hide();tegPopups.closeTotalHover()}function f(){tegPopups.closeTotalHover();tegPopups.success().hide();customerAccountListManager.RefreshGrid()}var i=n.attr("id").substring(11),t;n.addClass("loading");t=new tegPopups.preConfirmation(r,u);t.setOKButtonTitle(TeG.Translations.PopupDelete);tegPopups.showTotalHover();t.show(TeG.Translations.PopupDeleteCashierHeader,TeG.Translations.PopupDeleteCashierConfirmation)}}}
function EventTarget(){this._listeners={}}EventTarget.prototype={constructor:EventTarget,addListener:function(n,t){typeof this._listeners[n]=="undefined"&&(this._listeners[n]=[]);this._listeners[n].push(t)},addListenerIfNotExist:function(n,t){var r,i,u;for(typeof this._listeners[n]=="undefined"&&(this._listeners[n]=[]),r=this._listeners[n],i=0,u=r.length;i<u;i++)if(r[i]===t)return;this._listeners[n].push(t)},fire:function(n){var i,t,r;if(typeof n=="string"&&(n={type:n}),n.target||(n.target=this),!n.type)throw new Error("Event object missing 'type' property.");if(this._listeners[n.type]instanceof Array)for(i=this._listeners[n.type],t=0,r=i.length;t<r;t++)i[t].call(this,n)},removeListener:function(n,t){var r,i,u;if(this._listeners[n]instanceof Array)for(r=this._listeners[n],i=0,u=r.length;i<u;i++)if(r[i]===t){r.splice(i,1);break}}};var TeG=TeG||{};TeG.Widget={Button:{ResetPassword:function(){var n=this;this.Click=function(){var t,i,r;(n.elem=$(this),n.isCancel=!1,n.accountNumber=$(this).attr("id").substring(14),n.data={},n.data.accountNumber=n.accountNumber,n.data.emailVal=n.data.smsVal="",n.url=tegUrlHelper.resetCustomerAccountPassword,n.On().fire("click"),n.isCancel)||(tegPopups.showTotalHover(),t=new tegPopups.preConfirmation,t.constructor.prototype.Widget=n,t.setOKButtonTitle(TeG.Translations.PopupOk),t.OkButtonHandler=function(i){n=i.data.that.Widget;delete i.data.that.Widget;n.elem.addClass("loading");$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data),error:function(i){n=this.that;t.hide();n.elem.removeClass("loading");tegErrorHandler.processError(i,$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordErrorMessage"]').val())}}).done(function(i){var r,f;if(n=this.that,n.ajaxData=i,t.hide(),!i.IsSucceed&&i.failureReason){n.elem.removeClass("loading");t.hide();r=new tegPopups.error;r.CloseButtonHandler=function(){n.On().fire("successFalse");tegPopups.closeTotalHover()};f=$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordSuccessFailureMessage"]').val();r.show(f,i.failureReason);return}n.On().fire("successFlowStart");n.elem.removeClass("loading");t.hide();var e=$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordSuccessPopupTitle"]').val(),o=$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordSuccessPopupMessage"]').val(),u=new tegPopups.success;u.Widget=n;u.OkButtonHandler=function(t){n=t.data.that.Widget;delete t.data.that.Widget;tegPopups.closeTotalHover();t.data.that.hide();n.On().fire("successFlowEnd")};u.show(e,o)})},t.CancelButtonHandler=function(){n.elem.removeClass("loading");t.hide();tegPopups.closeTotalHover()},i=$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordConfirmationPopupTitle"]').val(),r=$(".js-resetPasswordTranslate_"+n.accountNumber+' input[name="resetPasswordConfirmationPopupMessage"]').val(),t.show(i,r))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},ChangePassword:function(){var n=this,t=null,i=null,r=null;this.setFirstName=function(n){t=n};this.setEmail=function(n){i=n};this.setSms=function(n){r=n};this.Click=function(){var u,f,e;(n.elem=$(this),n.isCancel=!1,n.accountNumber=$(this).attr("data-account"),n.data={},n.data.LoginName=n.accountNumber,n.url=tegUrlHelper.resetCustomerAccountPassword,n.On().fire("click"),n.isCancel)||(tegPopups.showTotalHover(),u=tegPopups.changePasswordConfirmation(),u.setEmail(i),u.setSms(r),u.Widget=n,u.OkButtonHandler=function(i){n=i.data.that.Widget;delete i.data.that.Widget;n.data.ConfirmationEmail=i.data.that.getData().email;n.data.ConfirmationMobileNumber=i.data.that.getData().sms;n.data.Password=i.data.that.getData().password;n.elem.addClass("loading");$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data),error:function(t){n=this.that;u.hide();n.elem.removeClass("loading");tegErrorHandler.processError(t,$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordErrorTitle"]').val())}}).done(function(i){var e,o,s,r,f;if(n=this.that,n.ajaxData=i,u.hide(),i.IsSucceed=="false"&&i.failureReason){n.elem.removeClass("loading");u.hide();e=new tegPopups.error;e.CloseButtonHandler=function(){var n=TeG.Widget.Button.ResetPassword;n.On().fire("successFalse");tegPopups.closeTotalHover()};o=$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordSuccessFailureMessage"]').val();e.show(o,i.failureReason);return}n.On().fire("successFlowStart");n.elem.removeClass("loading");u.hide();s=$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordSuccessPopupTitle"]').val();r=$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordSuccessPopupMessage"]').val();r=r.replace(/%%name%%/,t).replace(/%%password%%/,'<span class="greenText textBold">'+$.trim(i.NewPassword)+"<\/span>");f=new tegPopups.success;f.Widget=n;f.OkButtonHandler=function(t){n=t.data.that.Widget;delete t.data.that.Widget;tegPopups.closeTotalHover();t.data.that.hide();n.On().fire("successFlowEnd")};f.show(s,r)})},u.CancelButtonHandler=function(){n.elem.removeClass("loading");tegPopups.closeTotalHover()},f=$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordConfirmationPopupTitle"]').val(),e=$(".js-changePasswordTranslate_"+n.accountNumber+' input[name="changePasswordConfirmationPopupMessage"]').val(),u.show(f,e))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},LockUnlockAccount:function(){var n=this;this.Click=function(){var t=$('div[data-role="grid"]').data("kendoGrid");(n.elem=$(this),n.isCancel=!1,n.data={},n.accountNumber=n.data.accountNumber=t.dataItem(t.select()).AccountNo,n.currentStatusChange=n.data.accountStatus=$(n.elem.find("span").get(1)).hasClass("lock")?"Locked":"Open",n.url=tegUrlHelper.UpdateAccountStatus,n.On().fire("click"),n.isCancel)||(n.elem.addClass("loading"),$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data),error:function(t){n=this.that;n.elem.removeClass("loading");tegErrorHandler.processError(t,$(".js-lockUlockTranslate_"+n.accountNumber+' input[name="lockUnlockErrorTitle"]').val())}}).done(function(i){var f,r,o,s;if((i.IsSucceed||i.isSucceed)==!0){if(n=this.that,n.ajaxData=i,n.grid=$('div[data-role="grid"]').data("kendoGrid"),n.accountNumber=n.grid.dataItem(t.select()).AccountNumber||n.grid.dataItem(t.select()).AccountNo||t.dataItem(t.select()).LoginName,n.On().fire("successFlowStart"),f=$("#PlayersGrid").index()===-1?"StationsGrid":"PlayersGrid",$("#"+f).length==0&&$("#MembersGrid").length!=0&&(f="MembersGrid"),n.dataSource=$('div[data-role="grid"]').data("kendoGrid").dataSource.data(),n.rowPosition=0,$.each(n.dataSource,function(t,i){if(i.AccountNo===n.accountNumber)return n.rowPosition=t,!1}),n.currentStatusChange==="Open")r="<div style='text-align:center'><img alt='Open' src='/Images/statusOpen.png' /><\/div>",n.dataSource[n.rowPosition].Status=1,n.dataSource[n.rowPosition].StatusHtml=r,n.dataSource[n.rowPosition].StatusTooltip="",$("#status_"+n.accountNumber).html(r).attr("title","");else{r="<div style='text-align:center'><img alt='Lock' src='/Images/statusLocked.png' /><\/div>";n.dataSource[n.rowPosition].Status=2;n.dataSource[n.rowPosition].StatusHtml=r;$("#status_"+n.accountNumber).html(r);var h=infoBlockData.timeDiff?infoBlockData.timeDiff:0,e=getUserDateTime(h),u=e.getDate();u=u.length==1?"0"+u:u;o=("0"+(e.getMonth()+1)).replace(/(\d{2})$/,"$1");s=e.getFullYear();$("#status_"+n.accountNumber).attr("title","Lock Date: "+u+"-"+o+"-"+s+". Locked by: "+$("#firstName").html()+" "+$("#lastName").html()+"("+$("#memberType").html()+")")}n.elem.removeClass("loading");n.On().fire("successFlowEnd")}else n=this.that,n.elem.removeClass("loading"),i.responseText={ExceptionName:i.Message,isNeedTranslation:!1},i.responseText=JSON.stringify(i.responseText),tegErrorHandler.processError(i)}))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},UpdateMemberProgressiveStatus:function(){var t=function(t){this.updateMemberProgressiveStatus=function(){$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data)}).error(function(){n=t;confirmationPopup.hide();n.elem.removeClass("loading");tegErrorHandler.processError(jqXHR,$('input[name="UpdatememberProgressiveStatusErrorTitle"]').val())}).done(function(i){n=t;t.ajaxData=i;t.On().fire("successFlowStart");var r=$("#PlayersGrid").index()===-1?"StationsGrid":"PlayersGrid";$("#"+r).length==0&&$("#MembersGrid").length!=0&&(r="MembersGrid");tegPopups.closeTotalHover();t.elem.removeClass("loading");t.On().fire("successFlowEnd")})}},i=function(t){this.updateMemberProgressiveStatus=function(){var i=new tegPopups.preConfirmation,f=t.memberList.gridBehaivor.getSelectedRowData().ProgressiveStatusId,e=TeG.GlobalVariables.LoggedInMemberTypeId,r;i.constructor.prototype.Widget=n;r=new u(f,e);i.setCancelButtonTitle(r.PopupCancelButtonTitle);i.setOKButtonTitle(r.PopupOkButtonTitle);i.OkButtonHandler=function(t){n=t.data.that.Widget;delete t.data.that.Widget;n.elem.addClass("loading");$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data)}).error(function(){n=this.that;i.hide();n.elem.removeClass("loading");tegErrorHandler.processError(jqXHR,$('input[name="UpdatememberProgressiveStatusErrorTitle"]').val())}).done(function(t){n=this.that;n.ajaxData=t;n.On().fire("successFlowStart");var r=$("#PlayersGrid").index()===-1?"StationsGrid":"PlayersGrid";$("#"+r).length==0&&$("#MembersGrid").length!=0&&(r="MembersGrid");tegPopups.closeTotalHover();i.hide();n.elem.removeClass("loading");n.On().fire("successFlowEnd")})};i.CancelButtonHandler=function(){n.elem.removeClass("loading");i.hide();tegPopups.closeTotalHover()};i.show(r.PopupTitle,r.PopupMessage)}},r=function(n){var r=n.memberList.gridBehaivor.getSelectedRowData().ProgressiveStatusId;this.getMemberUpdateMemberProgressiveStatusHandler=function(){switch(r){case TeG.Enums.ProgressiveStatus.NO:return new t(n);case TeG.Enums.ProgressiveStatus.YES:return new i(n)}}},u=function(n,t){this.PopupTitle=undefined;this.PopupMessage=undefined;this.PopupOkButtonTitle=undefined;this.PopupCancelButtonTitle=TeG.Translations.PopupCancel;n==TeG.Enums.ProgressiveStatus.NO&&(this.PopupTitle=TeG.Translations.UpdateMemberProgressiveStatusAddPopupTitle,this.PopupOkButtonTitle=TeG.Translations.UpdateMemberProgressiveStatusRemovePopupAddButtonText,this.PopupMessage=TeG.Translations.UpdateMemberProgressiveStatusAddPopupContent);n==TeG.Enums.ProgressiveStatus.YES&&(this.PopupTitle=TeG.Translations.UpdateMemberProgressiveStatusRemovePopupTitle,this.PopupOkButtonTitle=TeG.Translations.UpdateMemberProgressiveStatusRemovePopupRemoveButtonText,this.PopupMessage=TeG.Translations.UpdateMemberProgressiveStatusRemovePopupContent);n==TeG.Enums.ProgressiveStatus.NO&&t==TeG.Enums.MemberType.HeadOffice&&(this.PopupMessage=TeG.Translations.UpdateMemberProgressiveStatusAddPopupContentHoLevel);n==TeG.Enums.ProgressiveStatus.YES&&t==TeG.Enums.MemberType.HeadOffice&&(this.PopupMessage=TeG.Translations.UpdateMemberProgressiveStatusRemovePopupContentHoLevel)},n=this;this.Click=function(){if(n.elem=$(this),n.isCancel=!1,n.data={},n.accountNumber=n.data.LoginName=n.memberList.gridBehaivor.getSelectedRowData().LoginName,n.url=tegUrlHelper.updateMemberProgressiveStatus,n.On().fire("click"),!n.isCancel){var t=new r(n);t.getMemberUpdateMemberProgressiveStatusHandler().updateMemberProgressiveStatus()}};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},UpdateCustomerProgressiveStatus:function(){var n=this;this.Click=function(){(n.grid=$('div[data-role="grid"]').data("kendoGrid"),n.elem=$(this),n.isCancel=!1,n.data={},n.accountNumber=n.data.AccountNumber=n.grid.dataItem(n.grid.select()).AccountNo,n.IsProgressive=n.data.IsProgressive=!n.grid.dataItem(n.grid.select()).IsProgressive,n.url=tegUrlHelper.updateCustomerProgressiveStatus,n.On().fire("click"),n.isCancel)||(n.elem.addClass("loading"),$.ajax({type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",that:n,data:JSON.stringify(n.data),error:function(t){n=this.that;n.elem.removeClass("loading");tegErrorHandler.processError(t,$(".js-UpdateCustomerProgressiveStatusTranslate_"+n.accountNumber+' input[name="UpdatememberProgressiveStatusErrorTitle"]').val())}}).error(function(){n=this.that;confirmationPopup.hide();n.elem.removeClass("loading");tegErrorHandler.processError(jqXHR,$('input[name="UpdateCustomerProgressiveStatusErrorTitle"]').val())}).done(function(t){n=this.that;n.ajaxData=t;n.On().fire("successFlowStart");var i=$("#PlayersGrid").index()===-1?"StationsGrid":"PlayersGrid";$("#"+i).length==0&&$("#MembersGrid").length!=0&&(i="MembersGrid");n.grid.dataItem(n.grid.select()).IsProgressive?$(n.grid.select()).find("td.progressiveStatus").attr({name:TeG.Enums.ProgressiveStatus.PendingForDisable,title:""}):$(n.grid.select()).find("td.progressiveStatus").attr({name:TeG.Enums.ProgressiveStatus.PendingForEnable,title:""});n.elem.removeClass("loading");n.On().fire("successFlowEnd")}))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},DeleteAccount:function(){var n=this;this.Click=function(){var t,i,r;(n.elem=$(this),n.isCancel=!1,n.data={},n.accountNumber=n.data.accountNumber=n.elem.attr("id").substring(11),n.accountStatus=n.data.accountStatus="PendingToDelete",n.url=tegUrlHelper.UpdateAccountStatus,n.On().fire("click"),n.isCancel)||(tegPopups.showTotalHover(),t=new tegPopups.preConfirmation,t.constructor.prototype.Widget=n,t.OkButtonHandler=function(i){n=i.data.that.Widget;delete i.data.that.Widget;n.elem.addClass("loading");$.ajax({that:n,type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n.data),error:function(i){n=this.that;t.hide();n.elem.removeClass("loading");tegErrorHandler.processError(i,$('input[name="deleteAccountErrorMessage"]').val())}}).done(function(){n=this.that;n.elem.removeClass("loading");t.hide();var r=$("#deleteAccountTranslate_"+n.accountNumber+' input[name="deleteAccountSuccessPopupTitle"]').val(),u=$("#deleteAccountTranslate_"+n.accountNumber+' input[name="deleteAccountSuccessPopupMessage"]').val(),i=new tegPopups.success;i.Widget=n;i.OkButtonHandler=function(t){n=t.data.that.Widget;delete t.data.that.Widget;tegPopups.closeTotalHover();t.data.that.hide();n.On().fire("successFlowEnd")};i.show(r,u)})},t.CancelButtonHandler=function(){n.elem.removeClass("loading");t.hide();tegPopups.closeTotalHover()},i=$("#deleteAccountTranslate_"+n.accountNumber+' input[name="deleteAccountConfirmationPopupTitle"]').val(),r=$("#deleteAccountTranslate_"+n.accountNumber+' input[name="deleteAccountConfirmationPopupMessage"]').val(),t.show(i,r))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},DeleteMember:function(){var n=this;this.Click=function(){var i,t;if(n.jElem=$(this),n.isCancel=!1,n.data={},n.login=n.data.LoginName=n.jElem.attr("data-memberLogin"),n.memberName=null,n.url=tegUrlHelper.deleteMember,n.On().fire("click"),!n.isCancel){if(n.isNotEmptyBalance){i=new tegPopups.error;i.CloseButtonHandler=function(n){tegPopups.closeTotalHover();n.data.that.hide()};i.show(n.jElem.parent().find('input[name="deleteMemberErrorNotEmptyBalanceTitle"]').val(),n.jElem.parent().find('input[name="deleteMemberErrorNotEmptyBalanceMessage"]').val());return}t=new TeG.Popups2.Confirmation;t.constructor.prototype.Widget=n;t.setOkCaption(n.jElem.parent().find('input[name="deleteMemberConfirmationOKTitle"]').val());t.okButtonHandler=function(n){var i=n.data.that.constructor.prototype.Widget;delete n.data.that.constructor.prototype.Widget;$(n.data.that.OKButton).css("margin-right","112px");i.jElem.addClass("loading");$.ajax({that:i,confirmationPopup:t,type:"POST",url:i.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i.data),error:function(n){var t=this.that;t.jElem.removeClass("loading");tegPopups.closeTotalHover();this.confirmationPopup.hide();$(this.confirmationPopup.OKButton).css("margin-right","0");tegErrorHandler.processError(n,t.jElem.parent().find('input[name="deleteMemberErrorTitle"]').val())}}).done(function(n){var i=this.that,t;if(i.jElem.removeClass("loading"),$(this.confirmationPopup.OKButton).css("margin-right","0"),this.confirmationPopup.hide(),!n.IsSucceed){t=new TeG.Popups2.Confirmation(TeG.Popups2.ICON_EXCLAMATION);t.constructor.prototype.Widget=i;t.setOkCaption(i.jElem.parent().find('input[name="deleteMemberConfirmationBalancedOKTitle"]').val());t.setCancelCaption(TeG.Translations.PopupClose);t.cancelButtonHandler=function(n){var t=n.data.that.constructor.prototype.Widget;delete n.data.that.constructor.prototype.Widget;tegPopups.closeTotalHover();n.data.that.hide()};t.okButtonHandler=function(n){var t=n.data.that.constructor.prototype.Widget;delete n.data.that.constructor.prototype.Widget;$(n.data.that.OKButton).css("margin-right","112px");$.ajax({that:t,confirmationPopupError:n.data.that,type:"POST",url:tegUrlHelper.getBalancedMember,contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify({LoginName:t.login}),error:function(n){var t=this.that;t.jElem.removeClass("loading");tegPopups.closeTotalHover();this.confirmationPopupError.hide();$(this.confirmationPopupError.OKButton).css("margin-right","0");tegErrorHandler.processError(n,t.jElem.parent().find('input[name="deleteMemberErrorTitle"]').val())}}).done(function(n){var t=this.that;t.jElem.removeClass("loading");tegPopups.closeTotalHover();this.confirmationPopupError.hide();$(this.confirmationPopupError.OKButton).css("margin-right","0");$(".js-member-list").hide();$(".js-accounts-with-balances-for-delete").html(n);t.On().fire("deleteAccountWithBalancedVisible")})};t.show(i.jElem.parent().find('input[name="deleteMemberConfirmationBalancedTitle"]').val(),n.FailureReason);return}i.On().fire("successFlowEnd")})};t.cancelButtonHandler=function(n){tegPopups.closeTotalHover();$(n.data.that.OKButton).css("margin-right","0");n.data.that.hide()};t.show(n.jElem.parent().find('input[name="deleteMemberConfirmationPopupTitle"]').val()+" "+n.memberName,n.jElem.parent().find('input[name="deleteMemberConfirmationPopupMessage"]').val().replace(/%%member_name%%/,'<span class="textBold">'+n.memberName+"<\/span>"))}};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},ResetLoginAttempts:function(){var n=this;this.Click=function(){(n.elem=$(this),n.isCancel=!1,n.data={},n.accountNumber=n.data.accountNumber=n.elem.attr("id").substring(18),n.url=tegUrlHelper.ResetLoginAttempts,n.On().fire("click"),n.isCancel)||(n.elem.find(".count").removeClass("red-blink"),n.elem.addClass("loading"),$.ajax({that:n,type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n.data),error:function(n){var t=this.that;t.elem.removeClass("loading");tegErrorHandler.processError(n,$(".js-resetLoginAttemptsTranslate_"+t.accountNumber+' input[name="resetLoginAttemptsErrorMessage"]').val())}}).done(function(n){var t=this.that;t.ajaxData=n;t.On().fire("successFlowStart");t.elem.removeClass("loading");t.elem.find(".count").text("0");$('div[data-role="grid"]').data("kendoGrid").select().next().find("span.count").text("0");$('div[data-role="grid"]').data("kendoGrid").select().next().find("span.count").removeClass("red-blink")}))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},LoginToAccount:function(){var n=this;this.click=function(){(n.elem=$(this),n.isCancel=!1,n.data={},n.LoginName=n.data.LoginName=n.elem.attr("data-account"),n.url=tegUrlHelper.getLowerLevelLogin,n.On().fire("click"),n.isCancel)||(n.elem.addClass("loading"),n.win=window.open(tegUrlHelper.getHoverPage,"LLL"),tegPopups.showDaisyWheelTotalHover(),$.ajax({that:n,type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n.data),error:function(n){var t=this.that;t.elem.removeClass("loading");t.win.close();tegErrorHandler.processError(n,TeG.Translations.PopupError)}}).done(function(n){var t=this.that,i,r,u,f;if(!n.IsSucceed){i=n.ErrorId?n.ErrorId:TeG.Translations.PopupError;r=n.ErrorMessage?n.ErrorMessage:i;this.error({responseText:JSON.stringify({ExceptionName:r,ReferenceNumber:i,isNeedTranslation:!1})});return}tegPopups.closeTotalHover();t.elem.removeClass("loading");u=n.LowerLevelUrl.replace(/\?.*$/,"");f=n.LowerLevelUrl.replace(/^.*?=/,""),function e(){t.win.lll?(t.win.lll(u,f),t.elem.removeClass("loading"),tegPopups.closeTotalHover(),t.win.focus()):setTimeout(e,150)}();t.win.focus()}))};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}()},SuspendLockNetworkParent:{click:function(n){var t,i,r;(n.elem=$(this),n.isCancel=!1,n.data={},n.account=n.data.LoginName=n.elem.attr("data-account"),n.status=$(n.translatePrefix+n.account+' input[name="status"]').val(),n.url=tegUrlHelper.changeMemberStatus,n.On().fire("click"),n.isCancel)||(t=new TeG.Popups2.Confirmation,t.setOkCaption($(n.translatePrefix+n.account+' input[name="confirmationOkCaption"]').val()),t.Widget=n,t.okButtonHandler=function(i){n=i.data.that.Widget;delete i.data.that.Widget;n.elem.addClass("loading");tegPopups.showTotalHover();$.ajax({that:n,type:"POST",confirmationPopup:t,url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n.data),error:function(n){var t=this.that;this.confirmationPopup.hide();t.elem.removeClass("loading");tegErrorHandler.processError(n,JSON.parse(n.responseText).ActionName)}}).done(function(n){var t=this.that,i,u,r,f;this.confirmationPopup.hide();t.elem.removeClass("loading");t.On().fire("successFlowStart");n.IsSucceed==!0?(i=new TeG.Popups2.Success("green"),i.widget=t,i.okButtonHandler=function(n){var t=n.data.that;t.widget.On().fire("successFlowEnd");delete t.widget},u=$(t.translatePrefix+t.account+' input[name="successTitle"]').val(),r=$(t.translatePrefix+t.account+' input[name="successMessage"]').val(),r=r.replace(/%%name%%/,t.memberName),i.show(u,r)):(f=new TeG.Popups2.Error("exclamation"),f.show(n.Title,n.Message))})},i=$(n.translatePrefix+n.account+' input[name="confirmationTitle"]').val(),r=$(n.translatePrefix+n.account+' input[name="confirmationMessage"]').val(),t.show(i,r))}},SuspendLockNetwork:function(){var n=this;n.translatePrefix=".js-resumeSuspendTranslate_";this.click=function(){TeG.Widget.Button.SuspendLockNetworkParent.click.call(this,n)};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}();this.On().addListener("click",function(){this.source.data.MemberStatus=this.source.status=="NetworkSuspend"?"Open":"NetworkSuspend"})},LockUnlockNetwork:function(){var n=this;n.translatePrefix=".js-lockUnlockNetworkTranslate_";this.click=function(){if($(n.translatePrefix+$(this).attr("data-account")+' input[name="status"]').val()=="NetworkSuspend"){n.elem=$(this);n.data={};n.data.LoginName=n.elem.attr("data-account");n.data.MemberStatus="NetworkLock";n.url=tegUrlHelper.changeMemberStatus;n.elem.addClass("loading");tegPopups.showTotalHover();$.ajax({that:n,type:"POST",url:n.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(n.data),error:function(n){var t=this.that;t.elem.removeClass("loading");tegPopups.closeTotalHover();tegErrorHandler.processError(n,TeG.Translations.PopupError)}}).done(function(n){var t=this.that,i;n.IsSucceed==!0?(tegPopups.closeTotalHover(),t.On().fire("successFlowEnd")):(i=new TeG.Popups2.Error("exclamation"),tegPopups.closeTotalHover(),i.show(n.Title,n.Message),t.elem.removeClass("loading"))});return}TeG.Widget.Button.SuspendLockNetworkParent.click.call(this,n)};this.On=function(){var t=new EventTarget;return t.source=n,function(){return t}}();this.On().addListener("click",function(){this.source.data.MemberStatus=this.source.status=="NetworkLock"||this.source.status=="NetworkLockForSuspend"?"Open":"NetworkLock"})}},Balance:function(){this.jElemContainer=null;this.input={jElem:null,jElemLabel:null,jElemError:null,maxValue:Infinity,minValue:-Infinity,keyRestrict:function(){},valueRestrict:function(){},validate:function(){},focus:function(){},blur:function(){}};this.currency={jElem:null,jElemConvert:null,convert:function(){},showConvertCurrency:function(){},change:function(){},focus:function(){},blur:function(){}};this.submit={jElem:null,action:function(){}};this.activate=function(){if($("#ho-to-ma-currency-rate").parent("div:visible").length>0&&(this.currencyToCurrentMemberRate&&this.currencyToCurrentMemberRate!=1?$("#ho-to-ma-currency-rate").html("1 "+$(".js-ho-isocode").html()+" = "+parseFloat(this.currencyToCurrentMemberRate).toFixed(4)+" "+$(".js-sub-isocode").html()):$("#ho-to-ma-currency-rate").parent("div").hide()),this.input.jElem){this.input.jElem.off();this.input.jElem.on("keypress",{that:this},function(n){var t=n.data.that;return t.input.keyRestrict.call(t,n,t.input.jElem.val())});this.input.jElem.on("keyup",{that:this},function(n){var t=n.data.that;t.input.valueRestrict.call(t,n);t.currency&&t.currency.showConvertCurrency.call(t,t.currency.convert.call(t))});this.input.jElem.on("focus",{that:this},function(n){var t=n.data.that;t.currency&&t.currency.showConvertCurrency.call(t,t.currency.convert.call(t));t.input.focus.call(t)});this.input.jElem.on("blur",{that:this},function(n){$(this).attr("id")=="AddMemberCasinoCreditBalance"&&$(this).val($(this).val()||0);var t=n.data.that;t.input.validate.call(t);t.input.blur.call(t)})}if(this.currency.jElem){this.currency.jElem.off();this.currency.showConvertCurrency.call(this,this.currency.convert.call(this));this.currency.jElem.on("change",{that:this},function(n){var t=n.data.that;t.currency.change.call(t)});this.currency.jElem.on("focus",{that:this},function(n){var t=n.data.that;t.currency.focus.call(t)});this.currency.jElem.on("blur",{that:this},function(n){var t=n.data.that;t.currency.blur.call(t)})}if(this.submit.jElem){this.submit.jElem.off();this.submit.jElem.on("click",{that:this},function(n){var t=n.data.that;(t.input.jElem.blur(),(new TeG.Validator).IsContainerHasDisplayedErrorMessage(t.jElemContainer))||t.submit.action.call(t)})}}},BalanceBehaivor:{Input:{KeyRestrict:{PositiveDecimalOnly:function(n,t){var i=n.keyCode||n.which;return n.charCode?n.charCode&&n.charCode==13?!0:i==46&&/\./.test(t)?!1:(i>=48&&i<=57||i==46)?!0:!1:!0},PositiveAndNegativeDecimal:function(n,t){var i=n.keyCode||n.which;return i==45?t&&/^\-.*/.test(t)?!1:!0:TeG.Widget.BalanceBehaivor.Input.KeyRestrict.PositiveDecimalOnly.call(this,n,t)}},ValueRestrict:{Fixed2Positive:function(){/\.\d{3,}/.test(this.input.jElem.val())&&this.input.jElem.val(this.input.jElem.val().replace(/^(\-?\d*\.\d{2}\s*)(.*)/,"$1"))},Fixed2All:function(n){if(this.input.jElem.val().length>0){var i=this.input.jElem.val().substring(0,1),t=this.input.jElem.val().substring(1);/\-/.test(t)&&this.input.jElem.val(i+t.replace(/(\-*)/g,""))}return TeG.Widget.BalanceBehaivor.Input.ValueRestrict.Fixed2Positive.call(this,n)}},Validate:{UpdateWithTwoCurrencies:function(){var r=this.input.maxValue.toString()!="Infinity"?this.input.maxValue:$("#balance").html().replace(/\s|\,/g,""),u=this.input.minValue.toString()!="-Infinity"?this.input.minValue:1,t=null,n=null,i=0;this.jElemContainer.find(".js-ho-isocode").val()==this.currency.jElem.val()?(t=this.input.jElem.val(),n=this.currency.convert.call(this)):(t=this.currency.convert.call(this),n=this.input.jElem.val());n=Math.ceil(n*100)/100;n<0&&(i=-1*n);new TeG.Validator(this.input.jElem).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,t,r).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,i,u).MinNumberListener(TeG.Translations.DepositWithdrawalValidationNumber,Math.abs(kendo.parseFloat(this.jElemContainer.find(".js-currency-convert").data("converted"))),.01).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderInHtml2();(new TeG.Validator).IsContainerHasErrorMessage(this.jElemContainer)&&(this.jElemContainer.find(".js-tip").hide(),this.jElemContainer.find(".js-currency-convert").hide(),this.jElemContainer.find(".errorMessageInHtml2 ").show())},Update:function(){var t=this.input.maxValue.toString()!="Infinity"?this.input.maxValue:$("#balance").html().replace(/\s|\,/g,""),i=this.input.minValue.toString()!="-Infinity"?this.input.maxValue:1,n=0;this.input.jElem.val()<0&&(n=-1*this.input.jElem.val());new TeG.Validator(this.input.jElem).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,this.input.jElem.val(),t).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,n,i).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderInHtml2();(new TeG.Validator).IsContainerHasErrorMessage(this.jElemContainer)&&(this.jElemContainer.find(".js-tip").hide(),this.jElemContainer.find(".js-currency-convert").hide(),this.jElemContainer.find(".errorMessageInHtml2 ").show())},StandartOrEmpty:function(){this.input.jElem!=""&&(this.maxValue=this.input.maxValue.toString()!="Infinity"?this.input.maxValue:$("#balance").html().replace(/\s|\,/g,""),new TeG.Validator(this.input.jElem).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,this.input.jElem.val(),this.input.maxValue).MinNumberListener(TeG.Translations.ValidateInsertValidNumericValue,this.input.jElem.val(),this.input.minValue).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderInHtml2(),(new TeG.Validator).IsContainerHasErrorMessage(this.jElemContainer)&&(this.jElemContainer.find(".js-currency-convert").hide(),this.jElemContainer.find(".errorMessageInHtml2 ").show()))},TwoCurrenciesPositive:function(){this.input.jElem!=""&&(this.maxValue=this.input.maxValue.toString()!="Infinity"?this.input.maxValue:$("#balance").html().replace(/\s|\,/g,""),new TeG.Validator(this.input.jElem).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,this.input.jElem.val(),this.input.maxValue).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).RequiredListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderInHtml2(),(new TeG.Validator).IsContainerHasErrorMessage(this.jElemContainer)&&(this.jElemContainer.find(".js-currency-convert").hide(),this.jElemContainer.find(".errorMessageInHtml2 ").show()))},Standart:function(){var n=this.input.maxValue.toString()!="Infinity"?this.input.maxValue:$("#balance").html().replace(/\s|\,/g,"");new TeG.Validator(this.input.jElem).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,this.input.jElem.val(),n).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).RequiredListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderInHtml2()}}},Currency:{Convert:{FromSelect:function(){if(!this.currencyToSubordinateRate||!this.currencyToCurrentMemberRate)throw"need assign dynamic attributes currencyToSubordinateRate and currencyToCurrentMemberRate";var n=this.jElemContainer.find(".js-ho-isocode").val()==this.currency.jElem.val()?this.currencyToSubordinateRate:this.currencyToCurrentMemberRate;return this.input.jElem.val()/n}},ShowConvertCurrency:{TipHide:function(n){if(n){var t=this.currency.jElem.val(),i=this.jElemContainer.find(".js-ho-isocode").val()==t?this.jElemContainer.find(".js-sub-isocode").html():this.jElemContainer.find(".js-ho-isocode").html();this.jElemContainer.find(".js-currency-convert").html("("+tegFinancial.CurrencyFormat(n)+" "+i+")").data("converted",tegFinancial.CurrencyFormat(n)+"");this.jElemContainer.find(".js-tip").hide();this.jElemContainer.find(".errorMessageInHtml2").hide();this.jElemContainer.find(".js-currency-convert").show()}else this.jElemContainer.find(".js-tip").show(),this.jElemContainer.find(".errorMessageInHtml2").show(),this.jElemContainer.find(".js-currency-convert").hide()},TipHideMA:function(n){if(n&&this.currencyIdCurrentMember!=this.currencyIdSubordinate){if(!this.memberCurrencyIso)throw"this.memberCurrencyIso must be dynamically assigned";this.jElemContainer.find(".js-currency-convert").html("("+tegFinancial.CurrencyFormat(n)+" "+this.memberCurrencyIso+")").show();this.jElemContainer.find(".errorMessageInHtml2").hide()}else this.jElemContainer.find(".js-currency-convert").hide(),this.jElemContainer.find(".errorMessageInHtml2").hide()}},Change:{SelectTwoCurrencies:function(){new TeG.Validator(this.input.jElem).SetRenderErrorType("inHtml2").CleanError();this.input.validate.call(this);(new TeG.Validator).IsContainerHasDisplayedErrorMessage(this.jElemContainer)?this.input.jElemError.show():(this.input.jElemError.hide(),this.currency.showConvertCurrency.call(this,this.currency.convert.call(this)))},SelectSetCurrencyRate:function(){if(this.input.currencyIdCurrentMember)throw"this.input.currencyIdCurrentMember must be assigned";this.currencyIdSubordinate=this.currency.jElem.val();this.currencyToCurrentMemberRate=tegFinancial.GetCurrencyRate(this.currencyIdCurrentMember,this.currencyIdSubordinate);this.currency.showConvertCurrency.call(this,this.currency.convert.call(this));this.input.minValue=.0099999999*this.currencyToCurrentMemberRate;this.input.maxValue=Number($("#balance").html().replace(/\s|\,/g,""))*this.currencyToCurrentMemberRate;(new TeG.Validator).CleanAllError(this.jElemContainer);this.input.validate.call(this)}}}},getBalanceBehaivor:function(n){var t=new TeG.Widget.Balance;switch(n){case"MasterAgentUpdateTwoCurrencies":t.input.keyRestrict=this.BalanceBehaivor.Input.KeyRestrict.PositiveAndNegativeDecimal;t.input.valueRestrict=this.BalanceBehaivor.Input.ValueRestrict.Fixed2All;t.input.validate=this.BalanceBehaivor.Input.Validate.UpdateWithTwoCurrencies;t.currency.convert=this.BalanceBehaivor.Currency.Convert.FromSelect;t.currency.showConvertCurrency=this.BalanceBehaivor.Currency.ShowConvertCurrency.TipHide;t.currency.change=this.BalanceBehaivor.Currency.Change.SelectTwoCurrencies;break;case"MasterAgentAddTwoCurrencies":t.input.keyRestrict=this.BalanceBehaivor.Input.KeyRestrict.PositiveDecimalOnly;t.input.valueRestrict=this.BalanceBehaivor.Input.ValueRestrict.Fixed2All;t.input.validate=this.BalanceBehaivor.Input.Validate.TwoCurrenciesPositive;t.currency.convert=this.BalanceBehaivor.Currency.Convert.FromSelect;t.currency.change=this.BalanceBehaivor.Currency.Change.SelectSetCurrencyRate;t.currency.showConvertCurrency=this.BalanceBehaivor.Currency.ShowConvertCurrency.TipHideMA;break;case"MasterAgentUpdateOneCurrency":t.input.keyRestrict=this.BalanceBehaivor.Input.KeyRestrict.PositiveAndNegativeDecimal;t.input.valueRestrict=this.BalanceBehaivor.Input.ValueRestrict.Fixed2All;t.input.validate=this.BalanceBehaivor.Input.Validate.Update;t.input.focus=function(){this.jElemContainer.find(".js-tip").show()};break;case"Standart":t.input.keyRestrict=this.BalanceBehaivor.Input.KeyRestrict.PositiveDecimalOnly;t.input.valueRestrict=this.BalanceBehaivor.Input.ValueRestrict.Fixed2All;t.input.validate=this.BalanceBehaivor.Input.Validate.Standart;break;case"OnlyPositiveNumberInInput":t.input.keyRestrict=this.BalanceBehaivor.Input.KeyRestrict.PositiveDecimalOnly;t.input.valueRestrict=this.BalanceBehaivor.Input.ValueRestrict.Fixed2Positive;break;default:throw"Balance behaivor scenario mistaked";}return t},Element:{Multiselect:function(n){this.isCheckAll=!0;this.class="selected";this.isOneElementSelected=!0;this.jElem=n;this.jElemClicked=null;this.jElemList=n.children("div");this.jElem.off();this.jElemList.off();this.jElemList.on("click",{that:this},function(t){var i=t.data.that;t.shiftKey||t.ctrlKey?t.ctrlKey?i.ctrlKey($(this)):t.shiftKey?i.shiftKey($(this)):i.noShiftNoCtrlKey($(this)):i.noShiftNoCtrlKey($(this));i.isOneElementSelected&&i.oneElementSelected();i.isCheckAll&&($(this).attr("data-value")==""?(n.find("."+i.class).removeClass(i.class),$(this).addClass(i.class)):$(this).attr("data-value")!=""&&n.find('[data-value = ""]').removeClass(i.class))});this.noShiftNoCtrlKey=function(n){this.jElemList.removeClass(this.class);n.addClass(this.class)};this.ctrlKey=function(n){n.hasClass(this.class)?n.removeClass(this.class):n.addClass(this.class)};this.shiftKey=function(n){if(this.jElem.children("."+this.class).index()==-1&&this.noShiftNoCtrlKey(n),n.hasClass(this.class))while(n.next().index()!=-1&&n.next().hasClass(this.class))n=n.next(),n.removeClass(this.class);else{n.addClass(this.class);for(var i=!1,t=n;t.prev().index()!=-1;)t=t.prev(),t.hasClass(this.class)&&(i=!0);if(!i)return;while(n.prev().index()!=-1&&!n.prev().hasClass(this.class))n=n.prev(),n.addClass(this.class)}};this.oneElementSelected=function(){this.jElem.children("."+this.class).index()==-1&&this.jElemList.eq(0).addClass(this.class)}}}}
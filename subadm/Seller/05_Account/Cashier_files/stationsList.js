function AddStationsViewModel(){var n=this;this.IsBetGroupsVisible=ko.observable(!1);this.LGBetGroupsVisible=ko.observable(!1);this.GroupCategory=ko.observable(null);this.BetGroups=ko.observableArray([]);this.SelectedValue=ko.observable("");this.GroupChange=function(t){n.SelectedValue(t.Name)}}var TeG=TeG||{},addStationsViewModel=null;TeG.StationsList=function(){function n(n,t){var i={addStationsUrl:tegUrlHelper.AddStation,errClbck:function(n){tegPopups.closeTotalHover();tegErrorHandler.processError(n)},successClbck:function(n){tegPopups.totalHoverRemoveDaisyWheel();n=JSON.parse(n);n.IsCreationSucceeded?(TeG.StationsList().AddRemoveStations().Add().FillHTMLAddedStation([n]),TeG.StationsList().AddRemoveStations().Add().StationCreationSuccess(1)):TeG.StationsList().AddRemoveStations().Add().StationCreationFail(n.FailureReason)}};t=$.extend(i,t||{});$.ajax({type:"POST",url:t.addStationsUrl,contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify(n),error:t.errClbck,success:t.successClbck})}function t(n){this.data=n}function u(t){u.baseClass.constructor.call(this,t);this.match=function(){var n=this.data.name;return n===undefined&&this.data.amount==1};this.create=function(){n(this.data,{})}}function i(t){i.baseClass.constructor.call(this,t);this.match=function(){var n=this.data.name;return n!==""&&n!==undefined&&this.data.amount==1};this.create=function(){if(this.data.name!=""){var i={preferredUsername:this.data.name,accountType:"Station"},r=tegUrlHelper.checkPreferredUsername,t=this;$.ajax({type:"POST",url:r,contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify(i),error:function(n){tegPopups.closeTotalHover();tegErrorHandler.processError(n,TeG.Translations.AddRemovePlayersTabAddPlayers)},success:function(i){if(i=JSON.parse(i),i.IsSucceed)n(t.data,{});else{tegPopups.closeTotalHover();var r=TeG.Translations.ValidateStationPreferredUsernameAlreadyExists.replace(/%%username%%/,t.data.name);new TeG.Validator($('#AddStations [name="addStationsName"]')).SetMessage(r).ErrorRenderDefault()}}})}}}function r(t){r.baseClass.constructor.call(this,t);this.match=function(){var n=Number(t.amount||1);return this.data.amount>1};this.create=function(){this.data.stationsPrefix=this.data.name;delete this.data.name;n(this.data,{addStationsUrl:tegUrlHelper.AddStationsBulk,successClbck:function(n){var n=JSON.parse(n);$("#stationCreationPercent").html("1 %");$("#progressPopupTitleAddingStations").show();$("#progressPopupTitleCreditStations").hide();$("#addStationControlPopup").show();TeG.StationsList().AddRemoveStations().Add().StationBulkCreationControl(n.AddStationsResultGuid)}})}}function f(n){this.rules=[];this.rules.push(new i(n));this.rules.push(new r(n));this.create=function(){for(index in this.rules)if(this.rules[index].match()===!0){this.rules[index].create();break}}}return extend(u,t),extend(i,t),extend(r,t),{Show:function(){return{ShowPasswords:function(){$.ajax({type:"POST",url:tegUrlHelper.StationsPasswords,contentType:"application/json; charset=utf-8",dataType:"html",error:function(n){tegErrorHandler.processError(n);$("#StationsListDiv").removeClass("divLoading")},success:function(n){var t;n=n.replace(/(.*?\r?\n?.*?\r?\n?.*?\r?\n?)(\<script.*)/,"$2");t=$(n).find(".k-grid").attr("id");$("#StationsListDiv").removeClass("divLoading");$("#StationsGrid").css("display","none");$("#StationsPasswords").css("display","block");$("#StationsPasswords").html(n);var i=$("#"+t).data("kendoGrid"),r=kendo.template($("#toolbarTemplateStationsPasswordsGrid").html()),u=TeG.Translations,f=function(){return r(u)};TeG.Grid.Options.Restore(i,f);i.dataSource.fetch().then(function(){TeG.kendoGridManager&&TeG.kendoGridManager()})}})}}},Back:function(){return{BackFromPasswords:function(){$("#StationsGrid").css("display","block");$("#StationsPasswords").html("");var n=$("#StationsGrid").data("kendoGrid"),t=kendo.template($("#toolbarTemplateStationsGrid").html()),i=TeG.Translations,r=function(){return t(i)};TeG.Grid.Options.Restore(n,r);n.dataSource.fetch()}}},AddRemoveStations:function(){return{Add:function(){function n(){var n=new TeG.Validator($('#AddStations [name="addStationsName"]'));n.CleanAllError($("#AddStations"));n.MaxNumberListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('#AddStations [name="addStationsNumberQnt"]').val()>1?$("#lblAddStationsPrefix").html().replace(/\*|\:/g,""):$("#lblAddStationsName").html().replace(/\*|\:/g,"")),$('#AddStations [name="addStationsNumberQnt"]').val().length,20).StationUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('#AddStations [name="addStationsNumberQnt"]').val()>1?$("#lblAddStationsPrefix").html().replace(/\*|\:/g,""):$("#lblAddStationsName").html().replace(/\*|\:/g,""))).StationIncorrectListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$('#AddStations [name="addStationsNumberQnt"]').val()>1?$("#lblAddStationsPrefix").html().replace(/\*|\:/g,""):$("#lblAddStationsName").html().replace(/\*|\:/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$('#AddStations [name="addStationsNumberQnt"]').val()>1?$("#lblAddStationsPrefix").html().replace(/\*|\:/g,""):$("#lblAddStationsName").html().replace(/\*|\:/g,""))).ErrorRenderDefault()}return{Show:function(){$("#AddRemoveStations .tabsBar>button").removeClass("selected");$("#DivStationsGrid").addClass("divLoading");$.trim($("#AddStations").html())==""?$.ajax({type:"POST",url:tegUrlHelper.addStationsTab,contentType:"application/json; charset=utf-8",dataType:"html",error:function(n){tegErrorHandler.processError(n);$("#StationsListDiv").removeClass("divLoading")},success:function(t){var f,i,u,r;t=t.replace(/(.*?\r?\n?.*?\r?\n?)(\<div.*)/,"$2");$("#DivStationsGrid").removeClass("divLoading");$("#StationsGrid").css("display","none");$("#AddRemoveStations").css("display","block");$("#AddStations").css("display","block");$("#addStationsTab").addClass("selected");$("#AddStations").html(t);splitterResize();addStationsViewModel==null&&(addStationsViewModel=new AddStationsViewModel);ko.cleanNode($("table.userSettings").get(0));ko.applyBindings(addStationsViewModel,$("table.userSettings").get(0));$('#AddStations [name="addStationsName"]').data("CurrentRole","StationName");f=tegFinancial.getLoginGroups({currency:$("#addStationsCasinoCurrency").html(),groupName:"RNGMaxPayout"});addStationsViewModel.GroupCategory(f.Categories[0]||{Groups:[]});i=addStationsViewModel.GroupCategory().Groups;u=Number.MAX_VALUE;for(r in i)parseInt(i[r].Rank)<u&&(u=parseInt(i[r].Rank),addStationsViewModel.SelectedValue(i[r].Name));addStationsViewModel.BetGroups(addStationsViewModel.GroupCategory().Groups);$("#memberType").html()!=TeG.Translations.MemberLoginTypeAgentCashier&&(addStationsViewModel.LGBetGroupsVisible(!0),addStationsViewModel.BetGroups().length>0&&addStationsViewModel.IsBetGroupsVisible(!0));$("#AddStations #ldBetGroupAreaTr").removeClass("hidden");$("#AddStations #betGroupAreaTr").removeClass("hidden");$("#AddStations .cancel").on("click",function(){TeG.StationsList().AddRemoveStations().Hide()});$('#AddStations [name="addStationsNumberQnt"]').on("keypress",function(n){if(TeG.Utils().isNotPositiveInteger(n,$(this)))return!1});$('#AddStations [name="addStationsNumberQnt"]').on("blur",function(){/^0+/.test($(this).val())&&$(this).val($(this).val().replace(/^0+/,""));($.trim($(this).val())==""||$.trim($(this).val())=="0")&&$(this).val("1");$(this).val()==1?($("#lblAddStationsName").show(),$("#lblAddStationsPrefix").hide(),$("tr#addPlayerPreferredUsernameTr").show(),$('#AddStations [name="addStationsName"]').attr({maxlength:19,placeholder:TeG.Translations.AddStationsNameTip,title:TeG.Translations.AddStationsNameTip}),new TeG.Validator($('#AddStations [name="addStationsName"]')).CleanAllError($("#AddStations"))):($("#lblAddStationsName").hide(),$("#lblAddStationsPrefix").show(),$("tr#addPlayerPreferredUsernameTr").hide(),$('#AddStations [name="addStationsName"]').data("CurrentRole","StationPrefix"),$('#AddStations [name="addStationsName"]').attr({maxlength:14,placeholder:TeG.Translations.AddStationsPrefixTip,title:TeG.Translations.AddStationsPrefixTip}),$('#AddStations [name="addStationsName"]').val()!=""&&n())});changeNumberOfStations=function(t){var r=$("#addStationsNumberQnt"),i=parseInt(r.val(),10);i!=NaN?t&&i<20?$("#addStationsNumberQnt").val(i+1):!t&&i>1&&$("#addStationsNumberQnt").val(i-1):$("#addStationsNumberQnt").val(1);Number(r.val())>1?($("tr#addPlayerPreferredUsernameTr").hide(),$('#AddStations [name="addStationsName"]').data("CurrentRole","StationPrefix"),$('#AddStations [name="addStationsName"]').attr({maxlength:14,placeholder:TeG.Translations.AddStationsPrefixTip,title:TeG.Translations.AddStationsPrefixTip})):($("tr#addPlayerPreferredUsernameTr").show(),$('#AddStations [name="addStationsName"]').data("CurrentRole","StationName"),$('#AddStations [name="addStationsName"]').attr({maxlength:19,placeholder:TeG.Translations.AddStationsNameTip,title:TeG.Translations.AddStationsNameTip}));$('#AddStations [name="addStationsNumberQnt"]').blur();$('#AddStations [name="addStationsName"]').val()!=""&&n()};$("#addStationTrigerUp").on("click",function(){changeNumberOfStations(!0)});$("#addStationTrigerDown").on("click",function(){changeNumberOfStations(!1)});$("#AddStations").find('[name="profile"]').eq(0).attr("checked","checked");$('#AddStations [name="addStationsCreditCasinoBalance"]').on("keypress",function(n){var t=$(n.target||n.srcElement);if(TeG.Utils().isNotAllowedNumericKey(n,t.val()))return!1});$('#AddStations [name="addStationsCreditCasinoBalance"]').on("keyup",function(n){var t=$(n.target||n.srcElement);/\.\d{3,}/.test(t.val())&&t.val(t.val().replace(/^(\d*\.\d{2}\s*)(.*)/,"$1"));new TeG.Validator(t).CurrencyListener(null).isValid&&$("#addStationsDepositCredits").html(tegFinancial.CurrencyFormat(tegFinancial.ConvertToCredits(t.val())));$("#addStationsDepositCredits").html()!=""?($("#addStationsDepositCreditsInfo").css("display","block"),$("#addStationsDepositCreditsInfoEmpty").css("display","none")):($("#addStationsDepositCreditsInfo").css("display","none"),$("#addStationsDepositCreditsInfoEmpty").css("display","block"))});$('#AddStations [name="addStationsAutoPassword"]').on("click",function(){$('#AddStations [name="addStationsAutoPassword"]').is(":checked")?($('#AddStations [name="addStationsPassword"]').off(),$('#AddStations [name="addStationsConfirmPassword"]').off(),$(".stationPassword .errorMessage").remove(),$(".stationPassword .error").removeClass("error"),$(".stationPassword").slideUp("slow",function(){splitterResize()})):($("#addPanPass").placeholder(),TeG.StationsList().AddRemoveStations().Add().Validate().Password(),$(".stationPassword").slideDown("slow",function(){splitterResize()}))});$("#addStationButton").on("click",function(){TeG.StationsList().AddRemoveStations().Add().AddStationsButtonHandler()});TeG.StationsList().AddRemoveStations().Add().Validate().Common();$("#addPanPass").placeholder();$("input[name='addStationsName']").placeholder()}}):($("#DivStationsGrid").removeClass("divLoading"),$("#StationsGrid").css("display","none"),$("#AddRemoveStations").css("display","block"),$("#AddStations").css("display","block"),$("#RemoveStations").css("display","none"),$("#addStationsTab").addClass("selected"),$('#AddStations [name="addStationsNumberQnt"]').val("1"),$("label#lblAddStationsPrefix").hide(),$("label#lblAddStationsName").show(),$('#AddStations [name="addStationsName"]').data("CurrentRole","StationName"),$('#AddStations [name="addStationsName"]').attr({maxlength:19,placeholder:TeG.Translations.AddStationsNameTip,title:TeG.Translations.AddStationsNameTip}),$('#AddStations [name="addStationsName"]').val(""),$("#AddStations").find('[name="profile"]').removeAttr("checked"),$("#AddStations").find('[name="profile"]').eq(0).attr("checked","checked"),$('#AddStations [name="addStationsCreditCasinoBalance"]').val("0"),$("#addStationsDepositCreditsInfo").css("display","none"),$("#addStationsDepositCreditsInfoEmpty").css("display","block"),$("#addStationsAutoPassword").attr("checked","checked"),$('#AddStations [name="addStationsPassword"]').val(""),$('#AddStations [name="addStationsConfirmPassword"]').val(""),$(".stationPassword").hide(),$(".errorMessage").remove(),$(".error").removeClass("error"),$("#addStationResult").hide(),$("#addStationResult table tbody").html(""),$("#AddStations p").show(),$("#creationStationTitle").hide(),$("#creationStationFailTitle").hide(),$("#AddStations .userSettings").show(),$('#AddStations [name="addStationsPassword"]').off(),$('#AddStations [name="addStationsConfirmPassword"]').off(),splitterResize())},Validate:function(){return{Common:function(){$('#AddStations [name="addStationsNumberQnt"]').on("blur",function(){new TeG.Validator($('#AddStations [name="addStationsNumberQnt"]')).DisplayErrorMessageOffsetTop(15).MinNumberListener("",$(this).val(),1).MaxNumberListener("",$(this).val(),20).ErrorRenderDefault()});$('#AddStations [name="addStationsName"]').on("blur",function(){n()});$('#AddStations [name="addStationsCreditCasinoBalance"]').on("blur",function(){($(this).val()==""||$(this).val()==undefined)&&$(this).val(0);var n=Number($('#AddStations [name="addStationsCreditCasinoBalance"]').val())==0?"a":tegFinancial.ConvertToCredits($('#AddStations [name="addStationsCreditCasinoBalance"]').val()),t=new TeG.Validator($('#AddStations [name="addStationsCreditCasinoBalance"]'));t.DisplayErrorMessageOffsetTop(17).MaxNumberListener(TeG.Translations.ValidateSufficientBalance,$('#AddStations [name="addStationsCreditCasinoBalance"]').val(),$("#balance").html().replace(/\s|\,/g,"")/$('#AddStations [name="addStationsNumberQnt"]').val()).MinNumberListener(TeG.Translations.ValidateDepositLessThan1Credit,n,1).CurrencyListener(TeG.Translations.ValidateInsertValidNumericValue).RequiredListener(TeG.Translations.ValidateInsertValidNumericValue).ErrorRenderDefault()})},Password:function(){$('#AddStations [name="addStationsPassword"]').on("blur",function(){new TeG.Validator($('#AddStations [name="addStationsPassword"]')).DisplayErrorMessageOffsetTop(17).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$("#lblAddStationsPassword").html().replace(/\*|\:/g,""))).PasswordIncorrectListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$("#lblAddStationsPassword").html().replace(/\*|\:/g,""))).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$("#lblAddStationsPassword").html().replace(/\*|\:/g,""))).ErrorRenderDefault()});$('#AddStations [name="addStationsConfirmPassword"]').on("blur",function(){new TeG.Validator($('#AddStations [name="addStationsConfirmPassword"]')).PasswordUnsupportedListener(TeG.Translations.ValidateInsertFieldInCorrectFormat.replace(/%%field_label%%/,$("#lblAddStationsPassword").html().replace(/\*|\:/g,""))).RepeatPasswordListener(TeG.Translations.ValidatePasswordNotMatch,$('#AddStations [name="addStationsPassword"]').val()).RequiredListener(TeG.Translations.ValidatePleaseInsertYourLabel.replace(/%%field_label%%/,$("#lblAddStationsConfirmPassword").html().replace(/\*|\:/g,""))).ErrorRenderDefault()})}}},AddStationsButtonHandler:function(){var o,n,i,e;if($('#AddStations [name="addStationsNumberQnt"]').blur(),$('#AddStations [name="addStationsName"]').blur(),$('#AddStations [name="addStationsCreditCasinoBalance"]').blur(),$('#AddStations [name="addStationsPassword"]').blur(),$('#AddStations [name="addStationsConfirmPassword"]').blur(),new TeG.ValidateElement.passwordPairOnSubmit({jPass:$("#addPanPass"),jConf:$('input[name="addStationsConfirmPassword"]'),renderType:TeG.ValidateElement.RENDER_DEFAULT}),new TeG.Validator($('#AddStations [name="addStationsNumberQnt"]')).DisplayErrorMessageOffsetTop(15).MinNumberListener("",$('#AddStations [name="addStationsNumberQnt"]').val(),1).MaxNumberListener("",$('#AddStations [name="addStationsNumberQnt"]').val(),20).ErrorRenderDefault(),(new TeG.Validator).IsContainerHasDisplayedErrorMessage($("#AddStations"))){tegPopups.closeTotalHover();return}tegPopups.showDaisyWheelTotalHover();o=tegUrlHelper.AddStation;n={amount:$('#AddStations [name="addStationsNumberQnt"]').val(),name:$('#AddStations [name="addStationsName"]').val(),bettingProfileId:$('#AddStations input[name="profile"]:checked').val(),depositAmount:$('#AddStations [name="addStationsCreditCasinoBalance"]').val(),password:$(".stationPassword").css("display")=="block"?$('#AddStations [name="addStationsPassword"]').val():"",IsProgressive:$('#AddStations input[name="IsProgressive"]').is(":checked")};$('#AddStations [name="addStationsName"]').data("CurrentRole")=="StationName"?n.accountNo=$('#AddStations [name="addStationsName"]').val():n.stationsPrefix=$('#AddStations [name="addStationsName"]').val();$('#AddStations [name="addStationsNumberQnt"]').val()>1&&(n.amount=$('#AddStations [name="addStationsNumberQnt"]').val());var r=$.extend({},addStationsViewModel.GroupCategory()),t=r.Groups,u=[];for(i in t)t[i].Name==addStationsViewModel.SelectedValue()&&(t[i].IsAdded=0,u.push(t[i]));r.Groups=u;n.GroupCategory=JSON.stringify(r);e=new f(n);e.create()},StationBulkCreationControl:function(n){data={addStationsResultGuid:n};$.ajax({type:"POST",url:tegUrlHelper.GetAddStationsBulkResult,contentType:"application/json; charset=utf-8",dataType:"html",data:JSON.stringify(data),error:function(n){tegErrorHandler.processError(n);$("#DivStationsGrid").removeClass("divLoading")},success:function(t){t=JSON.parse(t);var i=parseInt(t.DepositedStationsAmount/t.TotalStationsAmount*100);i==0?(i=$("#stationCreationPercent").html().replace(/\s|\%/g,""),i=Number(i)+5,i>100&&(i=100),i=i+" %"):($("#progressPopupTitleAddingStations").hide(),$("#progressPopupTitleCreditStations").show(),i=i+" %");$("#stationCreationPercent").html(i);t.IsFinished?(TeG.StationsList().AddRemoveStations().Add().FillHTMLAddedStation(t.Stations),TeG.StationsList().AddRemoveStations().Add().StationCreationSuccess(t.CreatedStationsAmount,t.DepositedStationsAmount)):setTimeout(function(){TeG.StationsList().AddRemoveStations().Add().StationBulkCreationControl(n)},2e3)}})},StationCreationSuccess:function(n,t){var r,u;TeG.InfoBlock();$("#addStationControlPopup").hide();t||(t=n);var i=Number($("#addStationsNumberQnt").val()),f=!1,e=n-t;window.popupTitleAddStation="";n==i&&t==n?(popupTitleAddStation=$("#creationStationSuccessfullyTitle").show().html().replace(/%%number%%/,n),f=!0):n!=i&&t==n?popupTitleAddStation=$("#creationStationCreatedNotEqualOrdererTitle").html().replace(/%%created_number%%/,n).replace(/%%ordered_number%%/,i):n==i&&t!=n?popupTitleAddStation=$("#creationStationNotAllDepositedTitle").html().replace(/%%created_number%%/,n).replace(/%%not_deposited_number%%/,e):n!=i&&t!=n&&(popupTitleAddStation=$("#creationStationNotAllDepositedTitle").html().replace(/%%created_number%%/,n).replace(/%%not_deposited_number%%/,e));f===!0?(r=new tegPopups.success,r.OkButtonHandler=function(){tegPopups.closeTotalHover();tegPopups.success().hide();$("#AddStations p").hide();$("#AddStations .userSettings").hide();$("#creationStationTitle").html(popupTitleAddStation);$("#creationStationTitle").show();$("#addStationResult").show();splitterResize()},r.show($("#addStationsTab").html(),popupTitleAddStation)):(u=new tegPopups.error,u.CloseButtonHandler=function(){tegPopups.closeTotalHover();tegPopups.error().hide();$("#AddStations p").hide();$("#AddStations .userSettings").hide();$("#creationStationTitle").html(popupTitleAddStation);$("#creationStationTitle").show();$("#addStationResult").show();splitterResize()},u.show($("#addStationsTab").html(),popupTitleAddStation));$("#newStationsExport").show();$("#newStationsPrint").show()},StationCreationFail:function(n){var t=TeG.Translations.AddStationFailTitle;tegPopups.closeTotalHover();n&&n=="External server error."&&(t=TeG.Translations.AddStationFailAccountAlreadyExistsTitle);new TeG.Validator($('#AddStations [name="addStationsName"]')).SetMessage(t).ErrorRenderDefault()},FillHTMLAddedStation:function(n){var t=$("#NewStationsGrid").data("kendoGrid"),i=new kendo.data.DataSource({data:n});t.bind("dataBound",function(n){var t=null;$(n.sender._data).each(function(){t=$("div#NewStationsGrid").find('tr[data-uid="{uid}"]'.replace("{uid}",this.uid)).find("td.CustomerAccountNumber");this.IsCreationSucceeded||t.html().indexOf(TeG.Translations.ErrorAccountExists)!=-1||(t.html(t.html()+'&nbsp;&nbsp;<strong style="color:red">'+TeG.Translations.ErrorAccountExists+"<\/strong>"),$("div#NewStationsGrid").find('tr[data-uid="{uid}"]'.replace("{uid}",this.uid)).find("td:not(.CustomerAccountNumber)").html(""))})});t.setDataSource(i)}}},Remove:function(){return{Show:function(){$("#AddRemoveStations .tabsBar>button").removeClass("selected");window.splitterResize();$.ajax({type:"POST",url:tegUrlHelper.removeStationsTab,contentType:"application/json; charset=utf-8",dataType:"html",error:function(n){tegErrorHandler.processError(n);$("#StationsListDiv").removeClass("divLoading")},success:function(n){var i,t,r;n=n.replace(/(.*?\r?\n?.*?\r?\n?)(\<script.*)/,"$2");i=$(n).find(".k-grid").attr("id");$("#AddStations").css("display","none");$("#RemoveStations").html(n);t=$.Deferred();r=t.then(function(n){var t=$("div#"+n).data("kendoGrid");return TeG.Grid.Options.Restore(t),t});t.resolve(i);r.done(function(n){n.dataSource.fetch().then(function(){$("#RemoveStations").css("display","block");$("#removeStationsTab").addClass("selected");$("#removeStationButton").on("click",TeG.StationsList().AddRemoveStations().Remove().DeleteStations);$("#linkPrintRemoveStations").on("click",TeG.StationsList().AddRemoveStations().Remove().Print);splitterResize()})})}});$("#newStationsExport").hide();$("#newStationsPrint").hide()},DeleteStations:function(){var t=$("#RemoveStationsGridContainer").find('td input[type="checkbox"]:checked').length,n;t!=0&&(n=new tegPopups.preConfirmation,n.setOKButtonTitle(TeG.Translations.PopupDelete),n.CancelButtonHandler=function(n){tegPopups.closeTotalHover();n.data.that.hide()},n.OkButtonHandler=function(i){var r,u;$(i.data.that.OKButton).attr("disabled","disabled");$(i.data.that.OKButton).addClass("loading");r=Array();$("#RemoveStationsGridContainer").find('td input[type="checkbox"]:checked').each(function(){r.push($(this).attr("account"))});u=r.join(",");$.ajax({type:"POST",url:tegUrlHelper.removeStationsListExecute,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",data:{accountNumbersDelimitedList:u},error:function(t){n.hide();tegErrorHandler.processError(t,TeG.Translations.AddRemoveStationsDeleteStationsErrorPopupTitle,function(){})},success:function(n){var r,u;$(i.data.that.OKButton).removeAttr("disabled");$(i.data.that.OKButton).removeClass("loading");i.data.that.hide();$("#cbCheckAllToDelete").prop("checked",!1);n.isSucceed?(r=new tegPopups.success,r.OkButtonHandler=function(n){tegPopups.closeTotalHover();n.data.that.hide();TeG.StationsList().AddRemoveStations().Remove().RefreshGrid()},r.show(TeG.Translations.BulkDeleteStationsPopupSuccessTitle,t+" "+TeG.Translations.AddRemoveStationsBulkDeletePlayersPopupSuccessText)):(u=new tegPopups.error(popupClosErrorHandler),u.CloseButtonHandler=function(){tegPopups.closeTotalHover();i.data.that.hide();TeG.StationsList().AddRemoveStations().Remove().RefreshGrid()},u.show(TeG.Translations.AddRemoveStationsDeleteStationsErrorPopupTitle,TeG.Translations.AddRemoveStationsBulkDeleteStationsPopupErrorText))}})},tegPopups.showTotalHover(),n.show(TeG.Translations.AddRemoveStationsBulkDeleteStationsConfirmationTitle,TeG.Translations.AddRemoveStationsBulkDeleteStationsPopupConfirmationText.replace(/%%number%%/,t)))},Print:function(){var n=new TeG.Print("RemoveStationListGrid");n.Storage().Open()},RefreshGrid:function(){$("#RemoveStationListGrid").data("kendoGrid").dataSource.read()}}},Hide:function(){$("#StationsGrid").css("display","block");$("#StationsGrid").data("kendoGrid").dataSource.read();$("#AddRemoveStations").css("display","none");$("#newStationsExport").hide();$("#newStationsPrint").hide();$("#AddStations").html("");var n=$("div#StationsGrid").data("kendoGrid"),t=kendo.template($("#toolbarTemplateStationsGrid").html()),i=TeG.Translations,r=function(){return t(i)};TeG.Grid.Options.Restore(n,r);n.dataSource.fetch().then(function(){splitterResize()})}}}}}